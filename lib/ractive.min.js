/*
 ractive-legacy.js v0.5.8
 2014-09-18 - commit 2e726021

 http://ractivejs.org
 http://twitter.com/RactiveJS

 Released under the MIT License.
 */

Ractive=function(){"use strict";var t=function(){var t={el:void 0,append:!1,template:{v:1,t:[]},"yield":null,preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1};return t}(),e={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}},n=[],r=Object.prototype.hasOwnProperty,i=function(){var t=Object.prototype.toString;return function(e){return"[object Array]"===t.call(e)}}(),o=function(){var t=Object.prototype.toString;return function(e){return e&&"[object Object]"===t.call(e)}}(),s=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},a=function(t,e,n,r,i){var o,s,a;return t.push(function(){s=t.interpolate}),a=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,o={number:function(t,e){var n;return i(t)&&i(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var r,i,o,a;if(!n(t)||!n(e))return null;for(r=[],i=[],a=o=Math.min(t.length,e.length);a--;)i[a]=s(t[a],e[a]);for(a=o;a<t.length;a+=1)r[a]=t[a];for(a=o;a<e.length;a+=1)r[a]=e[a];return function(t){for(var e=o;e--;)r[e]=i[e](t);return r}},object:function(t,n){var i,o,a,u,c;if(!r(t)||!r(n))return null;i=[],u={},a={};for(c in t)e.call(t,c)&&(e.call(n,c)?(i.push(c),a[c]=s(t[c],n[c])):u[c]=t[c]);for(c in n)e.call(n,c)&&!e.call(t,c)&&(u[c]=n[c]);return o=i.length,function(t){for(var e,n=o;n--;)e=i[n],u[e]=a[e](t);return u}}}}(n,r,i,o,s),u=function(){var t;return t="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),c=function(){function t(t){var e,r,i,o,s,a="";if(!n[t]){for(i=[];a.length<t;)a+=1;for(e=parseInt(a,2),o=function(t){return"1"===t},s=0;e>=s;s+=1){for(r=s.toString(2);r.length<t;)r="0"+r;i[s]=Array.prototype.map.call(r,o)}n[t]=i}return n[t]}var e,n={};return e=function(e){var r,i,o,s,a,u;for(r=e.split("."),(i=n[r.length])||(i=t(r.length)),a=[],o=function(t,e){return t?"*":r[e]},s=i.length;s--;)u=i[s].map(o).join("."),a.hasOwnProperty(u)||(a.push(u),a[u]=!0);return a}}(),h=function(t){function e(r,i,o,s){var a=arguments[4];void 0===a&&(a=!1);var u,c,h=!0;for(c=i.length;c>=0;c--)u=r._subs[i[c]],u&&(h=n(r,u,o,s)&&h);if(r._parent&&h){if(a&&r.component){var l=r.component.name+"."+i[i.length-1];i=t(l),o&&(o.component=r)}e(r._parent,i,o,s)}}function n(t,e,n,r){var i=null,o=!1;n&&(r=[n].concat(r));for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,r)===!1&&(o=!0);return n&&o&&(i=n.original)&&(i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()),!o}var r;return r=function(n,r){var i=arguments[2];if(void 0===i&&(i={}),r){var o=t(r);e(n,o,i.event,i.args,!0)}}}(c),l=function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},f=function(){function t(t){setTimeout(t,0)}function e(t,e){return function(){for(var n;n=t.shift();)n(e)}}function n(t,e,r,o){var s;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof i)e.then(r,o);else if(!e||"object"!=typeof e&&"function"!=typeof e)r(e);else{try{s=e.then}catch(a){return void o(a)}if("function"==typeof s){var u,c,h;c=function(e){u||(u=!0,n(t,e,r,o))},h=function(t){u||(u=!0,o(t))};try{s.call(e,c,h)}catch(a){if(!u)return o(a),void(u=!0)}}else r(e)}}var r,i,o={},s={},a={};return"function"==typeof f?i=f:(i=function(r){var u,c,h,l,f,d,p=[],v=[],m=o;h=function(n){return function(r){m===o&&(u=r,m=n,c=e(m===s?p:v,u),t(c))}},l=h(s),f=h(a);try{r(l,f)}catch(g){f(g)}return d={then:function(e,r){var s=new i(function(i,a){var u=function(t,e,r){e.push("function"==typeof t?function(e){var r;try{r=t(e),n(s,r,i,a)}catch(o){a(o)}}:r)};u(e,p,i),u(r,v,a),m!==o&&t(c)});return s}},d["catch"]=function(t){return this.then(null,t)},d},i.all=function(t){return new i(function(e,n){var r,i,o,s=[];if(!t.length)return void e(s);for(o=function(i){t[i].then(function(t){s[i]=t,--r||e(s)},n)},r=i=t.length;i--;)o(i)})},i.resolve=function(t){return new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})}),r=i}(),d=function(){var t=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(e){return(e||"").replace(t,".$1")}}(),p=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return""},v=function(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e},m=function(t,e,n){var r;t.push(function(){return r=t.runloop});var i=function(t,e,n,r,i){this.root=t,this.keypath=e,this.priority=i,this.otherInstance=n,this.otherKeypath=r,this.bind(),this.value=this.root.viewmodel.get(this.keypath)};return i.prototype={setValue:function(t){var i=this;return this.updating||this.counterpart&&this.counterpart.updating?void(this.value=t):void(e(t)&&t._ractive&&t._ractive.setting||n(t,this.value)||(this.updating=!0,r.addViewmodel(this.otherInstance.viewmodel),this.otherInstance.viewmodel.set(this.otherKeypath,t),this.value=t,r.scheduleTask(function(){return i.updating=!1})))},bind:function(){this.root.viewmodel.register(this.keypath,this)},rebind:function(t){this.unbind(),this.keypath=t,this.counterpart.otherKeypath=t,this.bind()},unbind:function(){this.root.viewmodel.unregister(this.keypath,this)}},function(t,e,n,r){var o,s,a,u,c,h;o=n+"="+r,a=t.bindings,a[o]||(s=t.instance,u=t.parentFragment.priority,c=new i(e,n,s,r,u),a.push(c),s.twoway&&(h=new i(s,r,e,n,1),a.push(h),c.counterpart=h,h.counterpart=c),a[o]=c)}}(n,i,v),g=function(t,e,n){function r(t,e){var n;if("."===e)return t;if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error(o);n.pop(),e=e.substring(3)}return n.push(e),n.join(".")}return t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,"")}var i,o,s;return o='Could not resolve reference - too many "../" prefixes',s={evaluateWrapped:!0},i=function a(i,o,u){var c,h,l,f,d,p,v,m,g,y;if(o=t(o),"~/"===o.substr(0,2))return o.substring(2);if("."===o.charAt(0))return r(e(u),o);h=o.split(".")[0];do if(c=u.context,c&&(p=!0,d=i.viewmodel.get(c,s),d&&("object"==typeof d||"function"==typeof d)&&h in d))return c+"."+o;while(u=u.parent);if(h in i.data||h in i.viewmodel.computations)return o;if(i._parent&&!i.isolated){if(u=i.component.parentFragment,u.indexRefs&&void 0!==(l=u.indexRefs[o]))return i.component.indexRefBindings[o]=o,void i.viewmodel.set(o,l,!0);if(f=a(i._parent,o,u)){for(v=f.split("."),m=o.split(".");v.length>1&&m.length>1&&v[v.length-1]===m[m.length-1];)v.pop(),m.pop();return g=v.join("."),y=m.join("."),i.viewmodel.set(y,i._parent.viewmodel.get(g),!0),n(i.component,i._parent,g,y),o}}return p?void 0!==i.viewmodel.get(o)?o:void 0:o}}(d,p,m),y=function(t){function e(t){t.detach()}function n(t){t.detachNodes()}function r(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}var i=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};return i.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,r(this)},decrementTotal:function(){this.totalChildren-=1,r(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},remove:function(e){var n=e.isIntro?this.intros:this.outros;t(n,e),r(this)},init:function(){this.ready=!0,r(this)},detachNodes:function(){this.detachQueue.forEach(e),this.children.forEach(n)}},i}(l),b=function(t,e,n,r,i,o){function s(){var t,n,r;for(t=0;t<h.viewmodels.length;t+=1)n=h.viewmodels[t],r=n.applyChanges(),r&&e(n.ractive,"change",{args:[r]});for(h.viewmodels.length=0,a(),t=0;t<h.views.length;t+=1)h.views[t].update();for(h.views.length=0,t=0;t<h.tasks.length;t+=1)h.tasks[t]();return h.tasks.length=0,h.viewmodels.length?s():void 0}function a(){var t,e,n,r;for(t=f.length;t--;)e=f[t],e.keypath&&f.splice(t,1),(n=i(e.root,e.ref,e.parentFragment))&&((r||(r=[])).push({item:e,keypath:n}),f.splice(t,1));r&&r.forEach(u)}function u(t){t.item.resolve(t.keypath)}var c,h,l,f=[];return l={start:function(t,e){var n,i;return e&&(n=new r(function(t){return i=t})),h={previousBatch:h,transitionManager:new o(i,h&&h.transitionManager),views:[],tasks:[],viewmodels:[]},t&&h.viewmodels.push(t.viewmodel),n},end:function(){s(),h.transitionManager.init(),h=h.previousBatch},addViewmodel:function(t){h?-1===h.viewmodels.indexOf(t)&&h.viewmodels.push(t):t.applyChanges()},registerTransition:function(t){t._manager=h.transitionManager,h.transitionManager.add(t)},addView:function(t){h.views.push(t)},addUnresolved:function(t){f.push(t)},removeUnresolved:function(t){n(f,t)},detachWhenReady:function(t){h.transitionManager.detachQueue.push(t)},scheduleTask:function(t){h?h.tasks.push(t):t()}},t.runloop=l,c=l}(n,h,l,f,g,y),w=function(){var t=/^\s*[0-9]+\s*$/;return function(e){return t.test(e)?[]:{}}}(),E=function(t,e,n){function r(e,n,r){function i(e){var r,i;e.value=n,e.updating||(i=e.ractive,r=e.keypath,e.updating=!0,t.start(i),i.viewmodel.mark(r),t.end(),e.updating=!1)}var o,s,a,u,c,h;if(o=e.obj,s=e.prop,r&&!r.configurable){if("length"===s)return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}r&&(a=r.get,u=r.set),c=a||function(){return n},h=function(t){u&&u(t),n=a?a():t,h._ractiveWrappers.forEach(i)},h._ractiveWrappers=[e],Object.defineProperty(o,s,{get:c,set:h,enumerable:!0,configurable:!0})}var i,o,s;try{Object.defineProperty({},"test",{value:0}),o={filter:function(t,e,r){var i,o,s,a,u;return e?(i=e.split("."),o=i.pop(),s=i.join("."),(a=r.viewmodel.wrapped[s])&&!a.magic?!1:(u=r.get(s),n(u)&&/^[0-9]+$/.test(o)?!1:u&&("object"==typeof u||"function"==typeof u))):!1},wrap:function(t,e,n){return new s(t,e,n)}},s=function(t,e,n){var i,o,s,a;return this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,i=n.split("."),this.prop=i.pop(),o=i.join("."),this.obj=o?t.get(o):t.data,s=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),s&&s.set&&(a=s.set._ractiveWrappers)?void(-1===a.indexOf(this)&&a.push(this)):void r(this,e,s)},s.prototype={get:function(){return this.value},reset:function(e){this.updating||(this.updating=!0,this.obj[this.prop]=e,t.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath),this.updating=!1)},set:function(t,n){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=e(t),this.updating=!1),this.obj[this.prop][t]=n)},teardown:function(){var t,e,n,r,i;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(r=e._ractiveWrappers,i=r.indexOf(this),-1!==i&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(a){o=!1}return i=o}(b,w,i),x=function(t){return!!t}(E),_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},k=function(t,e){var n;return n=t?function(t,n){return n&&n!==e.html?document.createElementNS(n,t):document.createElement(t)}:function(t,n){if(n&&n!==e.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)}}(u,_),A=function(){var t="object"==typeof document;return t}(),T=function(t){var e;try{Object.defineProperty({},"test",{value:0}),t&&Object.defineProperty(document.createElement("div"),"test",{value:0}),e=Object.defineProperty}catch(n){e=function(t,e,n){t[e]=n.value}}return e}(A),O=function(t,e,n){var r;try{try{Object.defineProperties({},{test:{value:0}})}catch(i){throw i}n&&Object.defineProperties(t("div"),{test:{value:0}}),r=Object.defineProperties}catch(i){r=function(t,n){var r;for(r in n)n.hasOwnProperty(r)&&e(t,r,n[r])}}return r}(k,T,A),C=function(t){return function(e,n,r){var i;if("string"!=typeof n||!t(r))throw new Error("Bad arguments");if(i=+e.get(n)||0,!t(i))throw new Error("Cannot add to a non-numeric value");return e.set(n,i+r)}}(s),S=function(t){return function(e,n){return t(this,e,void 0===n?1:+n)}}(C),N=function(t){var e=/^\.+/;return function(n){return t(n).replace(e,"")}}(d),R=["o","ms","moz","webkit"],I=function(t){var e;return"undefined"==typeof window?e=null:(!function(t,e,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(t){var n,r,o;return n=Date.now(),r=Math.max(0,16-(n-e)),o=i(function(){t(n+r)},r),e=n+r,o})}}(t,0,window),e=window.requestAnimationFrame),e}(R),L=function(){var t;return t="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()}}(),P=function(t,e,n){var r=[],i={tick:function(){var o,s,a;for(a=e(),n.start(),o=0;o<r.length;o+=1)s=r[o],s.tick(a)||r.splice(o--,1);n.end(),r.length?t(i.tick):i.running=!1},add:function(e){r.push(e),i.running||(i.running=!0,t(i.tick))},abort:function(t,e){for(var n,i=r.length;i--;)n=r[i],n.root===e&&n.keypath===t&&n.stop()}};return i}(I,L,b),F=function(){var t,e={};return t="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(t,n){if(!n){if(e[t])return;e[t]=!0}console.warn(t)}:function(){}}(),M=function(){function t(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function e(t){return t.str}var n,r=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,i=/\/\*.*?\*\//g,o=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,s=/^@media/,a=/\[data-rvcguid="[a-z0-9-]+"]/g;return n=function(n,u){var c,h;return h=function(t){var n,r,i,s,a,c,h,l,f=[];for(n=[];r=o.exec(t);)n.push({str:r[0],base:r[1],modifiers:r[2]});for(s='[data-rvcguid="'+u+'"]',a=n.map(e),l=n.length;l--;)h=a.slice(),i=n[l],h[l]=i.base+s+i.modifiers||"",c=a.slice(),c[l]=s+" "+c[l],f.push(h.join(" "),c.join(" "));return f.join(", ")},c=a.test(n)?n.replace(a,'[data-rvcguid="'+u+'"]'):n.replace(i,"").replace(r,function(e,n){var r,i;return s.test(n)?e:(r=n.split(",").map(t),i=r.map(h).join(", ")+" ",e.replace(n,i))})}}(),j=function(t){function e(t,e,r){var i,o=e.constructor._guid;(i=n(r.css,r,o)||n(t.css,t,o))&&(e.constructor.css=i)}function n(e,n,r){return e?n.noCssTransform?e:t(e,r):void 0}var r={name:"css",extend:e,init:function(){}};return r}(M),V=function(){function t(t,e){return"function"==typeof e&&/_super/.test(t)}var e;return e=function(e,n,r){return r||t(e,n)?function(){var t,r="_super"in this,i=this._super;return this._super=n,t=e.apply(this,arguments),r&&(this._super=i),t}:e}}(),D=function(t){function e(t,e,n){var r=n.data||{},i=o(t.prototype.data);return s(i,r)}function n(t,n,r){n.data=e(t,n,r)}function r(t,n,r){var i=r.data,o=e(t,n,r);return"function"==typeof o&&(o=o.call(n,i)||i),n.data=o||{}}function i(t){var e=this.init(t.constructor,t,t);return e?(t.data=e,!0):void 0}function o(t){if("function"!=typeof t||!Object.keys(t).length)return t;var e={};return a(t,e),s(t,e)}function s(t,e){return"function"==typeof e?h(e,t):"function"==typeof t?c(e,t):u(e,t)}function a(t,e,n){for(var r in t)n&&r in e||(e[r]=t[r])}function u(t,e){return t=t||{},e?(a(e,t,!0),t):t}function c(t,e){return function(n){var r;if(t){r=[];for(var i in t)n&&i in n||r.push(i)}return n=e.call(this,n)||n,r&&r.length&&(n=n||{},r.forEach(function(e){n[e]=t[e]})),n}}function h(e,n){var r;return r="function"!=typeof n?function(t){u(t,n)}:function(e){return n=t(n,function(){},!0),n.call(this,e)||e},t(e,r)}var l,f={name:"data",extend:n,init:r,reset:i};return l=f}(V),U={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned',defaultElSpecified:"The <{name}/> component has a default `el` property; it has been disregarded",noElementProxyEventWildcards:'Only component proxy-events may contain "*" wildcards, <{element} on-{event}/> is not valid.'},W={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},B=function(){var t;try{Object.create(null),t=Object.create}catch(e){t=function(){var t=function(){};return function(e,n){var r;return null===e?{}:(t.prototype=e,r=new t,n&&Object.defineProperties(r,n),r)}}()}return t}(),$={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},z=function(t){var e=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;return(r=n.matchPattern(e))?{t:t.NUMBER_LITERAL,v:r}:null}}(W),q=function(t){return function(e){var n=e.remaining();return"true"===n.substr(0,4)?(e.pos+=4,{t:t.BOOLEAN_LITERAL,v:"true"}):"false"===n.substr(0,5)?(e.pos+=5,{t:t.BOOLEAN_LITERAL,v:"false"}):null}}(W),H=function(){var t,e,n;return t=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,e=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(r){return function(i){var o,s,a,u;for(o=i.pos,s='"',a=!1;!a;)u=i.matchPattern(t)||i.matchPattern(e)||i.matchString(r),u?s+='"'===u?'\\"':"\\'"===u?"'":u:(u=i.matchPattern(n),u?s+="\\u"+("000"+u.charCodeAt(1).toString(16)).slice(-4):a=!0);return s+='"',JSON.parse(s)}}}(),G=function(t){return t('"')}(H),Z=function(t){return t("'")}(H),K=function(t,e,n){return function(r){var i,o;return i=r.pos,r.matchString('"')?(o=n(r),r.matchString('"')?{t:t.STRING_LITERAL,v:o}:(r.pos=i,null)):r.matchString("'")?(o=e(r),r.matchString("'")?{t:t.STRING_LITERAL,v:o}:(r.pos=i,null)):null}}(W,G,Z),Q={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},Y=function(t,e,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var o;return(o=t(i))?r.test(o.v)?o.v:'"'+o.v.replace(/"/g,'\\"')+'"':(o=e(i))?o.v:(o=i.matchPattern(n.name))?o:void 0}}(K,z,Q),J=function(t,e){return function(n){var r,i,o;return r=n.pos,n.allowWhitespace(),i=e(n),null===i?(n.pos=r,null):(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),o=n.readExpression(),null===o?(n.pos=r,null):{t:t.KEY_VALUE_PAIR,k:i,v:o}):(n.pos=r,null))}}(W,Y),X=function(t){return function e(n){var r,i,o,s;return r=n.pos,o=t(n),null===o?null:(i=[o],n.matchString(",")?(s=e(n),s?i.concat(s):(n.pos=r,null)):i)}}(J),te=function(t,e){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("{")?(i=e(n),n.allowWhitespace(),n.matchString("}")?{t:t.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(W,X),ee=function(t){return function e(n){function r(t){o.push(t)}var i,o,s,a;return i=n.pos,n.allowWhitespace(),s=n.readExpression(),null===s?null:(o=[s],n.allowWhitespace(),n.matchString(",")&&(a=e(n),null===a&&n.error(t.expectedExpression),a.forEach(r)),o)}}($),ne=function(t,e){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("[")?(i=e(n),n.matchString("]")?{t:t.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(W,ee),re=function(t,e,n,r,i){return function(o){var s=t(o)||e(o)||n(o)||r(o)||i(o);return s}}(z,q,K,te,ne),ie=function(t,e){var n,r,i,o,s;return n=/^\.[a-zA-Z_$0-9]+/,i=function(t){var e=t.matchPattern(r);return e?"."+e:null},r=/^\[(0|[1-9][0-9]*)\]/,o=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,s=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,function(r){var a,u,c,h,l,f,d;if(a=r.pos,r.matchString("~/"))u="~/";else for(u="";r.matchString("../");)u+="../";if(u||(h=r.matchString(".")||""),c=r.matchPattern(/^@(?:index|key)/)||r.matchPattern(e.name)||"",s.test(c))return r.pos=a,null;if(!u&&!h&&o.test(c))return{t:t.GLOBAL,v:c};if(l=(u||h)+c,!l)return null;for(;f=r.matchPattern(n)||i(r);)l+=f;return r.matchString("(")&&(d=l.lastIndexOf("."),-1!==d?(l=l.substr(0,d),r.pos=a+l.length):r.pos-=1),{t:t.REFERENCE,n:l.replace(/^this\./,"./").replace(/^this$/,".")}}}(W,Q),oe=function(t,e){return function(n){var r,i;return r=n.pos,n.matchString("(")?(n.allowWhitespace(),i=n.readExpression(),i||n.error(e.expectedExpression),n.allowWhitespace(),n.matchString(")")||n.error(e.expectedParen),{t:t.BRACKETED,x:i}):null}}(W,$),se=function(t,e,n){return function(r){return t(r)||e(r)||n(r)}}(re,ie,oe),ae=function(t,e,n){return function(r){var i,o,s;if(i=r.pos,r.allowWhitespace(),r.matchString(".")){if(r.allowWhitespace(),o=r.matchPattern(n.name))return{t:t.REFINEMENT,n:o};r.error("Expected a property name")}return r.matchString("[")?(r.allowWhitespace(),s=r.readExpression(),s||r.error(e.expectedExpression),r.allowWhitespace(),r.matchString("]")||r.error("Expected ']'"),{t:t.REFINEMENT,x:s}):null}}(W,$,Q),ue=function(t,e,n,r,i){return function(o){var s,a,u,c;if(a=e(o),!a)return null;for(;a;)if(s=o.pos,u=r(o))a={t:t.MEMBER,x:a,r:u};else{if(!o.matchString("("))break;o.allowWhitespace(),c=n(o),o.allowWhitespace(),o.matchString(")")||o.error(i.expectedParen),a={t:t.INVOCATION,x:a},c&&(a.o=c)}return a}}(W,se,ee,ae,$),ce=function(t,e,n){var r,i;return i=function(n,r){return function(i){var o;return(o=r(i))?o:i.matchString(n)?(i.allowWhitespace(),o=i.readExpression(),o||i.error(e.expectedExpression),{s:n,o:o,t:t.PREFIX_OPERATOR}):null}},function(){var t,e,o,s,a;for(s="! ~ + - typeof".split(" "),a=n,t=0,e=s.length;e>t;t+=1)o=i(s[t],a),a=o;r=a}(),r}(W,$,ue),he=function(t,e){var n,r;return r=function(e,n){return function(r){var i,o,s;if(o=n(r),!o)return null;for(;;){if(i=r.pos,r.allowWhitespace(),!r.matchString(e))return r.pos=i,o;if("in"===e&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,o;if(r.allowWhitespace(),s=n(r),!s)return r.pos=i,o;o={t:t.INFIX_OPERATOR,s:e,o:[o,s]}}}},function(){var t,i,o,s,a;for(s="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),a=e,t=0,i=s.length;i>t;t+=1)o=r(s[t],a),a=o;n=a}(),n}(W,ce),le=function(t,e,n){return function(r){var i,o,s,a;return(o=e(r))?(i=r.pos,r.allowWhitespace(),r.matchString("?")?(r.allowWhitespace(),s=r.readExpression(),s||r.error(n.expectedExpression),r.allowWhitespace(),r.matchString(":")||r.error('Expected ":"'),r.allowWhitespace(),a=r.readExpression(),a||r.error(n.expectedExpression),{t:t.CONDITIONAL,o:[o,s,a]}):(r.pos=i,o)):null}}(W,he,$),fe=function(t,e){function n(t){return JSON.stringify(String(t))}function r(n,i){var o,s;if(n.t===t.REFERENCE&&-1===i.indexOf(n.n)&&i.unshift(n.n),s=n.o||n.m)if(e(s))r(s,i);else for(o=s.length;o--;)r(s[o],i);n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(e,r,o){var s=function(t){return i(e,t,o)};switch(r.t){case t.BOOLEAN_LITERAL:case t.GLOBAL:case t.NUMBER_LITERAL:return r.v;case t.STRING_LITERAL:return n(r.v);case t.ARRAY_LITERAL:return"["+(r.m?r.m.map(s).join(","):"")+"]";case t.OBJECT_LITERAL:return"{"+(r.m?r.m.map(s).join(","):"")+"}";case t.KEY_VALUE_PAIR:return r.k+":"+i(e,r.v,o);case t.PREFIX_OPERATOR:return("typeof"===r.s?"typeof ":r.s)+i(e,r.o,o);case t.INFIX_OPERATOR:return i(e,r.o[0],o)+("in"===r.s.substr(0,2)?" "+r.s+" ":r.s)+i(e,r.o[1],o);case t.INVOCATION:return i(e,r.x,o)+"("+(r.o?r.o.map(s).join(","):"")+")";case t.BRACKETED:return"("+i(e,r.x,o)+")";case t.MEMBER:return i(e,r.x,o)+i(e,r.r,o);case t.REFINEMENT:return r.n?"."+r.n:"["+i(e,r.x,o)+"]";case t.CONDITIONAL:return i(e,r.o[0],o)+"?"+i(e,r.o[1],o)+":"+i(e,r.o[2],o);case t.REFERENCE:return"_"+o.indexOf(r.n);default:e.error("Expected legal JavaScript")}}var o;return o=function(t){var e,n=[];return r(t,n),e={r:n,s:i(this,t,n)}}}(W,o),de=function(t,e,n,r,i){var o,s,a=/^\s+/;return s=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},s.prototype=Error.prototype,o=function(t,e){var n,r,i=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=i+t.length+1;return i=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},o.prototype={read:function(t){var e,n,r,i;for(t||(t=this.converters),e=this.pos,r=t.length,n=0;r>n;n+=1)if(this.pos=e,i=t[n](this))return i;return null},readExpression:function(){return r(this)},flattenExpression:i,getLinePos:function(t){for(var e,n=0,r=0;t>=this.lineEnds[n];)r=this.lineEnds[n],n+=1;return e=t-r,[n+1,e+1]},error:function(t){var e,n,r,i,o,a;throw e=this.getLinePos(this.pos),n=e[0],r=e[1],i=this.lines[e[0]-1],o=i+"\n"+new Array(e[1]).join(" ")+"^----",a=new s(t+" at line "+n+" character "+r+":\n"+o),a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(a)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},o.extend=function(t){var r,i,s=this;r=function(t,e){o.call(this,t,e)},r.prototype=e(s.prototype);for(i in t)n.call(t,i)&&(r.prototype[i]=t[i]);return r.extend=o.extend,r},t.Parser=o,o}(n,B,r,le,fe),pe=function(){var t=/^[^\s=]+/,e=/^\s+/;return function(n){var r,i,o;return n.matchString("=")?(r=n.pos,n.allowWhitespace(),(i=n.matchPattern(t))?n.matchPattern(e)?(o=n.matchPattern(t))?(n.allowWhitespace(),n.matchString("=")?[i,o]:(n.pos=r,null)):(n.pos=r,null):null:(n.pos=r,null)):null}}(),ve=[{delimiters:"delimiters",isTriple:!1,isStatic:!1},{delimiters:"tripleDelimiters",isTriple:!0,isStatic:!1},{delimiters:"staticDelimiters",isTriple:!1,isStatic:!0},{delimiters:"staticTripleDelimiters",isTriple:!0,isStatic:!0}],me=function(t){var e={"#":t.SECTION,"^":t.INVERTED,"/":t.CLOSING,">":t.PARTIAL,"!":t.COMMENT,"&":t.TRIPLE};return function(t){var n=e[t.str.charAt(t.pos)];return n?(t.pos+=1,n):null}}(W),ge=function(t){return{"if":t.SECTION_IF,unless:t.SECTION_UNLESS,"with":t.SECTION_WITH,each:t.SECTION_EACH}}(W),ye=function(){var t,e,n;return"undefined"==typeof window?n=null:(t=window,e=t.document,n={},e||(n=null),Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in i)t.call(i,s)&&o.push(s);if(e)for(var a=0;r>a;a++)t.call(i,n[a])&&o.push(n[a]);return o}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,i,o=this,s=[];for(o instanceof String&&(o=o.toString(),i=!0),n=0,r=o.length;r>n;n+=1)(o.hasOwnProperty(n)||i)&&(s[n]=t.call(e,o[n],n,o));return s}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,r,i,o;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=this.length,o=!1,arguments.length>1&&(r=e,o=!0),n=0;i>n;n+=1)this.hasOwnProperty(n)?o&&(r=t(r,this[n],n,this)):(r=this[n],o=!0);if(!o)throw new TypeError("Reduce of empty array with no initial value");return r}),Array.prototype.filter||(Array.prototype.filter=function(t,e){var n,r,i=[];for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(i[i.length]=this[n]);return i}),Array.prototype.every||(Array.prototype.every=function(t,e){var n,r,i;if(null==this)throw new TypeError;if(n=Object(this),r=n.length>>>0,"function"!=typeof t)throw new TypeError;for(i=0;r>i;i+=1)if(i in n&&!t.call(e,n[i],i,n))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e,n,r,i,o=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return e=o.call(arguments,1),n=this,r=function(){},i=function(){var i=this instanceof r&&t?this:t;return n.apply(i,e.concat(o.call(arguments)))},r.prototype=this.prototype,i.prototype=new r,i}),t.addEventListener||!function(t,e){var n,r,i,o,s,a;n=function(t,e){var n,r=this;for(n in t)r[n]=t[n];r.currentTarget=e,r.target=t.srcElement||e,r.timeStamp=+new Date,r.preventDefault=function(){t.returnValue=!1},r.stopPropagation=function(){t.cancelBubble=!0}},r=function(t,e){var r,i,o=this;r=o.listeners||(o.listeners=[]),i=r.length,r[i]=[e,function(t){e.call(o,new n(t,o))}],o.attachEvent("on"+t,r[i][1])},i=function(t,e){var n,r,i=this;if(i.listeners)for(n=i.listeners,r=n.length;r--;)n[r][0]===e&&i.detachEvent("on"+t,n[r][1])},t.addEventListener=e.addEventListener=r,t.removeEventListener=e.removeEventListener=i,"Element"in t?(t.Element.prototype.addEventListener=r,t.Element.prototype.removeEventListener=i):(a=e.createElement,e.createElement=function(t){var e=a(t);return e.addEventListener=r,e.removeEventListener=i,e},o=e.getElementsByTagName("head")[0],s=e.createElement("style"),o.insertBefore(s,o.firstChild))}(t,e),t.getComputedStyle||(n.getComputedStyle=function(){function t(n,r,i,o){var s,a=r[i],u=parseFloat(a),c=a.split(/\d/)[0];return isNaN(u)&&/^thin|medium|thick$/.test(a)&&(u=e(a),c=""),o=null!=o?o:/%|em/.test(c)&&n.parentElement?t(n.parentElement,n.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==i?o:/width/i.test(i)?n.clientWidth:n.clientHeight,"em"==c?u*o:"in"==c?96*u:"pt"==c?96*u/72:"%"==c?u/100*s:u}function e(t){var e,n;return o[t]||(e=document.createElement("div"),e.style.display="block",e.style.position="fixed",e.style.width=e.style.height="0",e.style.borderRight=t+" solid black",document.getElementsByTagName("body")[0].appendChild(e),n=e.getBoundingClientRect(),o[t]=n.right-n.left),o[t]
}function n(t,e){var n="border"==e?"Width":"",r=e+"Top"+n,i=e+"Right"+n,o=e+"Bottom"+n,s=e+"Left"+n;t[e]=(t[r]==t[i]==t[o]==t[s]?[t[r]]:t[r]==t[o]&&t[s]==t[i]?[t[r],t[i]]:t[s]==t[i]?[t[r],t[i],t[o]]:[t[r],t[i],t[o],t[s]]).join(" ")}function r(e){var r,i,o,s;r=e.currentStyle,i=this,o=t(e,r,"fontSize",null);for(s in r)/width|height|margin.|padding.|border.+W/.test(s)?"auto"===r[s]?/^width|height/.test(s)?i[s]=("width"===s?e.clientWidth:e.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(s)&&(i[s]="0px"):i[s]=t(e,r,s,o)+"px":"styleFloat"===s?i.float=r[s]:i[s]=r[s];return n(i,"margin"),n(i,"padding"),n(i,"border"),i.fontSize=o+"px",i}function i(t){return new r(t)}var o={};return r.prototype={constructor:r,getPropertyPriority:function(){},getPropertyValue:function(t){return this[t]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},i}())),n}(),be=function(t,e,n){function r(e,n,r){var o;if(n){for(;n.t===t.BRACKETED&&n.x;)n=n.x;return n.t===t.REFERENCE?r.r=n.n:n.t===t.NUMBER_LITERAL&&u.test(n.v)?r.r=n.v:(o=i(e,n))?r.rx=o:r.x=e.flattenExpression(n),r}}function i(e,n){for(var r,i=[];n.t===t.MEMBER&&n.r.t===t.REFINEMENT;)r=n.r,i.unshift(r.x?r.x.t===t.REFERENCE?r.x:e.flattenExpression(r.x):r.n),n=n.x;return n.t!==t.REFERENCE?null:{r:n.n,m:i}}var o,s,a=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,u=/^[0-9][1-9]*$/,c=new RegExp("^("+Object.keys(n).join("|")+")\\b");return s=/^[a-zA-Z$_0-9]+(?:(\.[a-zA-Z$_0-9]+)|(\[[a-zA-Z$_0-9]+\]))*$/,o=function(n,i){var o,u,h,l,f,d,p,v,m,g;if(o=n.pos,h={},g=n[i.delimiters],i.isStatic&&(h.s=!0),i.isTriple)h.t=t.TRIPLE;else{if("!"===n.remaining()[0]){try{d=n.readExpression(),n.allowWhitespace(),n.remaining().indexOf(g[1])?d=null:h.t=t.INTERPOLATOR}catch(y){}if(!d)return m=n.remaining().indexOf(g[1]),~m?n.pos+=m:n.error("Expected closing delimiter ('"+g[1]+"')"),{t:t.COMMENT}}if(!d)if(l=e(n),h.t=l||t.INTERPOLATOR,l===t.SECTION)(f=n.matchPattern(c))&&(h.n=f),n.allowWhitespace();else if((l===t.COMMENT||l===t.CLOSING)&&(v=n.remaining(),m=v.indexOf(g[1]),-1!==m))return h.r=v.substr(0,m).split(" ")[0],n.pos+=m,h}if(!d){n.allowWhitespace(),d=n.readExpression();var b;if(h.t===t.PARTIAL&&d&&(b=n.readExpression())&&(h={contextPartialExpression:d},d=b),v=n.remaining(),v.substr(0,g[1].length)!==g[1]&&":"!==v.charAt(0)){if(u=n.pos,n.pos=o,v=n.remaining(),m=v.indexOf(g[1]),-1!==m)return h.r=v.substr(0,m).trim(),s.test(h.r)||n.error("Expected a legal Mustache reference"),n.pos+=m,h;n.pos=u}}return r(n,d,h),h.contextPartialExpression&&(h.contextPartialExpression=[r(n,h.contextPartialExpression,{t:t.PARTIAL})]),(p=n.matchPattern(a))&&(h.i=p),h}}(W,me,ge,ye),we=function(t,e,n,r,i){function o(t){var e;return t.interpolate[t.inside]===!1?null:(e=n.slice().sort(function(e,n){return t[n.delimiters][0].length-t[e.delimiters][0].length}),function r(n){return n?s(t,n)||r(e.shift()):null}(e.shift()))}function s(n,o){var s,u,c,l,d,p,v,m,g;if(s=n.pos,c=n[o.delimiters],!n.matchString(c[0]))return null;if(u=e(n))return n.matchString(c[1])?(n[o.delimiters]=u,f):null;if(n.allowWhitespace(),u=r(n,o),null===u)return n.pos=s,null;if(n.allowWhitespace(),n.matchString(c[1])||n.error("Expected closing delimiter '"+c[1]+"' after reference"),u.t===t.COMMENT&&(u.exclude=!0),u.t===t.CLOSING&&(n.sectionDepth-=1,n.sectionDepth<0&&(n.pos=s,n.error("Attempted to close a section that wasn't open"))),u.contextPartialExpression)u.f=u.contextPartialExpression,u.t=t.SECTION,u.n="with",delete u.contextPartialExpression;else if(h(u)){for(n.sectionDepth+=1,l=[],v=l,d=u.n;m=n.read();){if(m.t===t.CLOSING){d&&m.r!==d&&n.error("Expected {{/"+d+"}}");break}if(m.t===t.INTERPOLATOR&&"else"===m.r)switch(u.n){case"unless":n.error("{{else}} not allowed in {{#unless}}");break;case"with":n.error("{{else}} not allowed in {{#with}}");break;default:v=p=[];continue}v.push(m)}l.length&&(u.f=l,!u.i&&"each"===u.n&&(g=a(u.f))&&(u.i=g)),p&&p.length&&(u.l=p)}return n.includeLinePositions&&(u.p=n.getLinePos(s)),u.n?u.n=i[u.n]:u.t===t.INVERTED&&(u.t=t.SECTION,u.n=t.SECTION_UNLESS),u}function a(e){var n,r,i,o;if(e)for(n=e.length;n--;){if(r=e[n],r.t===t.ELEMENT){if(i=a(r.o&&r.o.d)||a(r.t0&&r.t0.d)||a(r.t1&&r.t1.d)||a(r.t2&&r.t2.d)||a(r.f))return i;for(o in r.v)if(r.v.hasOwnProperty(o)&&r.v[o].d&&(i=a(r.v[o].d)))return i;for(o in r.a)if(r.a.hasOwnProperty(o)&&(i=a(r.a[o])))return i}if(r.t===t.INTERPOLATOR||r.t===t.TRIPLE||r.t===t.SECTION){if(r.r&&d.test(r.r))return r.r;if(r.x&&(i=u(r.x)))return i;if(r.rx&&(i=c(r.rx)))return i}}}function u(t){var e;for(e=t.r.length;e--;)if(d.test(t.r[e]))return t.r[e]}function c(e){var n,r,i;for(n=e.m.length;n--;){if(i=e.m[n],i.r&&(r=u(i)))return r;if(i.t===t.REFERENCE&&d.test(i.n))return i.n}}function h(e){return e.t===t.SECTION||e.t===t.INVERTED}var l,f={t:t.DELIMCHANGE,exclude:!0},d=/^@(?:index|key)$/;return l=o}(W,pe,ve,be,ge),Ee=function(t){var e="<!--",n="-->";return function(r){var i,o,s,a,u;return i=r.pos,r.matchString(e)?(s=r.remaining(),a=s.indexOf(n),-1===a&&r.error("Illegal HTML - expected closing comment sequence ('-->')"),o=s.substr(0,a),r.pos+=a+3,u={t:t.COMMENT,c:o},r.includeLinePositions&&(u.p=r.getLinePos(i)),u):null}}(W),xe=function(){var t=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return t}(),_e=function(t,e){var n,r,i;for(n=e.length;n--;){if(r=t.indexOf(e[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},ke=function(t){return function(e){var n,r,i,o;return r=e.remaining(),o=e.inside?"</"+e.inside:"<",e.inside&&!e.interpolate[e.inside]?n=r.indexOf(o):(i=[o,e.delimiters[0],e.tripleDelimiters[0],e.staticDelimiters[0],e.staticTripleDelimiters[0]],e.inAttribute===!0?i.push('"',"'","=",">","`"):e.inAttribute&&i.push(e.inAttribute),n=t(r,i)),n?(-1===n&&(n=r.length),e.pos+=n,r.substr(0,n)):null}}(_e),Ae=function(t){var e=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(n){var r;return n.matchString("</")?(r=n.matchPattern(e))?{t:t.CLOSING_TAG,e:r}:(n.pos-=2,void n.error("Illegal closing tag")):null}}(W),Te=function(){function t(t){return t?10===t?32:128>t?t:159>=t?r[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}var e,n,r,i;return n={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},r=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],i=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(n).join("|")+"));?","g"),e=function(e){return e.replace(i,function(e,r){var i;return i="#"!==r[0]?n[r]:"x"===r[1]?parseInt(r.substring(2),16):parseInt(r.substring(1),10),i?String.fromCharCode(t(i)):e})}}(ye),Oe=function(t,e,n){function r(t){var e,n,r;return t.allowWhitespace(),(n=t.matchPattern(h))?(e={name:n},r=i(t),r&&(e.value=r),e):null}function i(t){var e,r,i,o;return e=t.pos,t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),r=t.pos,i=t.sectionDepth,o=a(t,"'")||a(t,'"')||s(t),t.sectionDepth!==i&&(t.pos=r,t.error("An attribute value must contain as many opening section tags as closing section tags")),null===o?(t.pos=e,null):o.length?1===o.length&&"string"==typeof o[0]?n(o[0]):o:null):(t.pos=e,null)}function o(e){var n,r,i,o,s;return n=e.pos,(r=e.matchPattern(l))?(i=r,o=[e.delimiters[0],e.tripleDelimiters[0],e.staticDelimiters[0],e.staticTripleDelimiters[0]],-1!==(s=t(i,o))&&(r=r.substr(0,s),e.pos=n+r.length),r):null}function s(t){var n,r;for(t.inAttribute=!0,n=[],r=e(t)||o(t);null!==r;)n.push(r),r=e(t)||o(t);return n.length?(t.inAttribute=!1,n):null}function a(t,n){var r,i,o;if(r=t.pos,!t.matchString(n))return null;for(t.inAttribute=n,i=[],o=e(t)||u(t,n);null!==o;)i.push(o),o=e(t)||u(t,n);return t.matchString(n)?(t.inAttribute=!1,i):(t.pos=r,null)}function u(e,n){var r,i,o,s;return r=e.pos,o=e.remaining(),s=[n,e.delimiters[0],e.tripleDelimiters[0],e.staticDelimiters[0],e.staticTripleDelimiters[0]],i=t(o,s),-1===i&&e.error("Quoted attribute value must have a closing quote"),i?(e.pos+=i,o.substr(0,i)):null}var c,h=/^[^\s"'>\/=]+/,l=/^[^\s"'=<>`]+/;return c=r}(_e,we,Te),Ce=function(t,e,n){function r(t){var e,r,i;return t.allowWhitespace(),(e=n(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(r=t.read())?(i.value=r.v,i):null):null):null}var i,o,s,a,u,c,h;return o={"true":!0,"false":!1,undefined:void 0,"null":null},s=new RegExp("^(?:"+Object.keys(o).join("|")+")"),a=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,u=/\$\{([^\}]+)\}/g,c=/^\$\{([^\}]+)\}/,h=/^\s*$/,i=t.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&h.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(c),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(s))?{v:o[e]}:void 0},function(t){var e;return(e=t.matchPattern(a))?{v:+e}:void 0},function(t){var n,r=e(t);return r&&(n=t.values)?{v:r.v.replace(u,function(t,e){return e in n?n[e]:e})}:r},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=r(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]}),function(t,e){var n=new i(t,{values:e});return n.result}}(de,K,Y),Se=function(t,e,n,r){var i,o=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/;return i=t.extend({converters:[e]}),function(t){var e,s,a,u,c,h,l,f,d;if("string"==typeof t){if(s=o.exec(t))return e={m:s[1]},u="["+t.slice(e.m.length+1,-1)+"]",a=new i(u),e.a=n(a.result[0]),e;if(-1===t.indexOf(":"))return t.trim();t=[t]}for(e={},l=[],f=[];t.length;)if(c=t.shift(),"string"==typeof c){if(h=c.indexOf(":"),-1!==h){h&&l.push(c.substr(0,h)),c.length>h+1&&(f[0]=c.substring(h+1));break}l.push(c)}else l.push(c);return f=f.concat(t),f.length||"string"!=typeof l?(e={n:1===l.length&&"string"==typeof l[0]?l[0]:l},1===f.length&&"string"==typeof f[0]?(d=r("["+f[0]+"]"),e.a=d?d.value:f[0].trim()):e.d=f):e=l,e}}(de,le,fe,Ce),Ne=function(t,e,n,r,i,o,s,a){function u(n){var r,i,o,u,h,f,w,E,x,_,k;if(r=n.pos,n.inside)return null;if(!n.matchString("<"))return null;if("/"===n.nextChar())return null;if(i={t:t.ELEMENT},n.includeLinePositions&&(i.p=n.getLinePos(r)),n.matchString("!")&&(i.y=1),i.e=n.matchPattern(d),!i.e)return null;for(p.test(n.nextChar())||n.error("Illegal tag name"),f=function(t,e){var r=e.n||e;g.test(r)&&(n.pos-=r.length,n.error("Cannot use reserved event names (change, reset, teardown, update)")),i.v[t]=e};w=s(n);)(u=y[w.name])?i[u]=a(w.value):(h=m.exec(w.name))?(i.v||(i.v={}),E=a(w.value),f(h[1],E)):n.sanitizeEventAttributes&&v.test(w.name)||(i.a||(i.a={}),i.a[w.name]=w.value||0);if(n.allowWhitespace(),n.matchString("/")&&(x=!0),!n.matchString(">"))return null;if(o=i.e.toLowerCase(),!x&&!e.test(i.e)){for(("script"===o||"style"===o)&&(n.inside=o),_=[];c(o,n.remaining())&&(k=n.read(l))&&k.t!==t.CLOSING&&k.t!==t.CLOSING_TAG;)_.push(k);_.length&&(i.f=_)}return n.inside=null,n.sanitizeElements&&-1!==n.sanitizeElements.indexOf(o)?b:i}function c(t,e){var n,r;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),r=f[t],n&&r?!~r.indexOf(n[1].toLowerCase()):!0}var h,l,f,d=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,p=/^[\s\n\/>]/,v=/^on/,m=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,g=/^(?:change|reset|teardown|update)$/,y={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},b={exclude:!0};return l=[n,r,u,i,o],f={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]},h=u}(W,xe,we,Ee,ke,Ae,Oe,Se),Re=function(){var t=/^[ \t\f\r\n]+/,e=/[ \t\f\r\n]+$/;return function(n,r,i){var o;r&&(o=n[0],"string"==typeof o&&(o=o.replace(t,""),o?n[0]=o:n.shift())),i&&(o=n[n.length-1],"string"==typeof o&&(o=o.replace(e,""),o?n[n.length-1]=o:n.pop()))}}(),Ie=function(t){function e(t){return"string"==typeof t}function n(e){return e.t===t.COMMENT||e.t===t.DELIMCHANGE}function r(e){return(e.t===t.SECTION||e.t===t.INVERTED)&&e.f}var i,o=/^\s*\r?\n/,s=/\r?\n\s*$/;return i=function(t){var i,a,u,c,h;for(i=1;i<t.length;i+=1)a=t[i],u=t[i-1],c=t[i-2],e(a)&&n(u)&&e(c)&&s.test(c)&&o.test(a)&&(t[i-2]=c.replace(s,"\n"),t[i]=a.replace(o,"")),r(a)&&e(u)&&s.test(u)&&e(a.f[0])&&o.test(a.f[0])&&(t[i-1]=u.replace(s,"\n"),a.f[0]=a.f[0].replace(o,"")),e(a)&&r(u)&&(h=u.f[u.f.length-1],e(h)&&s.test(h)&&o.test(a)&&(u.f[u.f.length-1]=h.replace(s,"\n"),t[i]=a.replace(o,"")));return t}}(W),Le=function(){var t=/[-/\\^$*+?.()|[\]{}]/g;return function(e){return e.replace(t,"\\$&")}}(),Pe=function(t,e,n,r,i,o,s,a,u){function c(e,n,r,i,o,u){var h,l,f,d,y,b,w,E,x;for(a(e),h=e.length;h--;)l=e[h],l.exclude?e.splice(h,1):n&&l.t===t.COMMENT&&e.splice(h,1);for(s(e,i,o),h=e.length;h--;)if(l=e[h],l.f&&(y=r||l.t===t.ELEMENT&&v.test(l.e),y||(f=e[h-1],d=e[h+1],(!f||"string"==typeof f&&g.test(f))&&(b=!0),(!d||"string"==typeof d&&m.test(d))&&(w=!0)),c(l.f,n,y,b,w,u)),l.l&&(c(l.l,n,r,b,w,u),u&&(E={t:4,n:t.SECTION_UNLESS,f:l.l},l.r&&(E.r=l.r),l.x&&(E.x=l.x),l.rx&&(E.rx=l.rx),e.splice(h+1,0,E),delete l.l)),l.a)for(x in l.a)l.a.hasOwnProperty(x)&&"string"!=typeof l.a[x]&&c(l.a[x],n,r,b,w,u);for(h=e.length;h--;)"string"==typeof e[h]&&("string"==typeof e[h+1]&&(e[h]=e[h]+e[h+1],e.splice(h+1,1)),r||(e[h]=e[h].replace(p," ")),""===e[h]&&e.splice(h,1))}function h(t){var e=arguments[1];void 0===e&&(e=t),e.delimiters=t.delimiters||["{{","}}"],e.tripleDelimiters=t.tripleDelimiters||["{{{","}}}"],e.staticDelimiters=t.staticDelimiters||["[[","]]"],e.staticTripleDelimiters=t.staticTripleDelimiters||["[[[","]]]"]}var l,f,d,p=/[ \t\f\r\n]+/g,v=/^(?:pre|script|style|textarea)$/i,m=/^\s+/,g=/\s+$/;return f=e.extend({init:function(t,e){h(e,this),this.sectionDepth=0,this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t,e){return this.sectionDepth>0&&this.error("A section was left open"),c(t,e.stripComments!==!1,e.preserveWhitespace,!e.preserveWhitespace,!e.preserveWhitespace,e.rewriteElse!==!1),t},converters:[n,r,i,o]}),d=function(t){var e=arguments[1];void 0===e&&(e={});var n,r,i,o,s,a,c,l;if(h(e),c=new RegExp("<!--\\s*"+u(e.delimiters[0])+"\\s*>\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\\s*"+u(e.delimiters[1])+"\\s*-->"),l=new RegExp("<!--\\s*"+u(e.delimiters[0])+"\\s*\\/\\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\\s*"+u(e.delimiters[1])+"\\s*-->"),n={v:1},c.test(t)){for(r=t,t="";s=c.exec(r);){if(o=s[1],t+=r.substr(0,s.index),r=r.substring(s.index+s[0].length),a=l.exec(r),!a||a[1]!==o)throw new Error('Inline partials must have a closing delimiter, and cannot be nested. Expected closing for "'+o+'", but '+(a?'instead found "'+a[1]+'"':" no closing found"));(i||(i={}))[o]=new f(r.substr(0,a.index),e).result,r=r.substring(a.index+a[0].length)}t+=r,n.p=i}return n.t=new f(t,e).result,n},l=d}(W,de,we,Ee,Ne,ke,Re,Ie,Le),Fe=function(){return function(t,e){var n=t.map(e);return t.forEach(function(t,e){n[t]=n[e]}),n}}(ye),Me=function(t){var e,n;return e=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],n=t(e,function(t){return t})}(Fe),je=function(t,e,n,r,i){function o(t){var e=r(l);return e.parse=function(e,n){return s(e,n||t)},e}function s(e,r){if(!n)throw new Error(t.missingParser);return n(e,r||this.options)}function a(t,n){var r;if(!e){if(n&&n.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(u(t)&&(t=t.substring(1)),!(r=document.getElementById(t))){if(n&&n.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==r.tagName.toUpperCase()){if(n&&n.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return r.innerHTML}function u(t){return"#"===t.charAt(0)}function c(t){return!("string"==typeof t)}function h(t){return t.defaults&&(t=t.defaults),i.reduce(function(e,n){return e[n]=t[n],e},{})}var l={parse:s,fromId:a,isHashedId:u,isParsed:c,getParseOptions:h,createHelper:o};return l}(U,A,Pe,B,Me),Ve=function(t,e){function n(t){var e,n=t._config.template;if(n&&n.fn)return e=r(t,n.fn),e!==n.result?(n.result=e,e=i(e,t)):void 0}function r(e,n){var r=t.createHelper(t.getParseOptions(e));return n.call(e,e.data,r)}function i(n,r){if("string"==typeof n)"#"===n[0]&&(n=t.fromId(n)),n=e(n,t.getParseOptions(r));else if(1!==n.v)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return n}function o(t,e,n){if(e)for(var r in e)(n||!t.hasOwnProperty(r))&&(t[r]=e[r])}var s={name:"template",extend:function(t,e,n){var r;"template"in n&&(r=n.template,e.template="function"==typeof r?r:i(r,e))},init:function(t,e,n){var s,a;s="template"in n?n.template:t.prototype.template,"function"==typeof s&&(a=s,s=r(e,a),e._config.template={fn:a,result:s}),s=i(s,e),e.template=s.t,s.p&&o(e.partials,s.p)},reset:function(t){var e,r=n(t);return r?(e=i(r,t),t.template=e.t,o(t.partials,e.p,!0),!0):void 0}};return s}(je,Pe),De=function(t){function e(t,e){this.name=t,this.useDefaults=e}function n(t,e){var r,i;return(r=e(t))?r:!t.isolated&&(i=t._parent)?n(i,e):void 0}return e.prototype={constructor:e,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,e,n)},configure:function(e,n,r){var i,o=this.name,s=r[o];i=t(e[o]);for(var a in s)i[a]=s[a];n[o]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var r=e[t];r._fn&&(r._fn.isOwner?e[t]=r._fn:delete e[t],n=!0)}),n},findOwner:function(t,e){return t[this.name].hasOwnProperty(e)?t:this.findConstructor(t.constructor,e)},findConstructor:function(t,e){return t?t[this.name].hasOwnProperty(e)?t:this.findConstructor(t._parent,e):void 0},find:function(t,e){var r=this;return n(t,function(t){return t[r.name][e]})},findInstance:function(t,e){var r=this;return n(t,function(t){return t[r.name][e]?t:void 0})}},e}(B,ye),Ue=function(t,e){var n=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],r=t(n,function(t){return new e(t,"computed"===t)});return r}(Fe,De),We=function(){},Be=function(t){function e(e,n){var r;if(n in e){var i=e[n];r="function"==typeof i?i:function(){return i}}else r=t;return r}var n;return n=function(t,n,r){if(!/_super/.test(r))return r;var i=function(){var t,o=e(i._parent,n),s="_super"in this,a=this._super;return this._super=o,t=r.apply(this,arguments),s?this._super=a:delete this._super,t};return i._parent=t,i._method=r,i}}(We),$e=function(t,e){function n(e,n,i){if(n in e){if(i in e)throw new Error(r(n,i,!0));t(r(n,i)),e[i]=e[n]}}function r(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function i(t){n(t,"eventDefinitions","events")}function o(t){e(t.adaptors)&&n(t,"adaptors","adapt")}return function(t){i(t),o(t)}}(F,i),ze=function(t,e,n,r,i,o,s,a){function u(t,e,n,r,i){h[e][t](n,r,i)}function c(t,e,r,i){a(i),u(t,"data",e,r,i),f.parseOptions.forEach(function(t){t in i&&(r[t]=i[t])});for(var o in i)if(o in n&&!(o in f.parseOptions)&&!(o in h)){var c=i[o];r[o]="function"==typeof c?s(e.prototype,o,c):c}f.registries.forEach(function(n){n[t](e,r,i)}),u(t,"template",e,r,i),u(t,"css",e,r,i)}var h,l,f;h={data:e,template:r,css:t},l=Object.keys(n).filter(function(t){return!o[t]&&!h[t]&&!i[t]}),f=[].concat(h.data,i,l,o,h.template,h.css);for(var d in h)f[d]=h[d];return f.keys=Object.keys(n).concat(o.map(function(t){return t.name})).concat(["css"]),f.parseOptions=i,f.registries=o,f.extend=function(t,e,n){c("extend",t,e,n)},f.init=function(t,e,n){c("init",t,e,n),e._config&&(e._config.options=n)},f.reset=function(t){return f.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},f}(j,D,t,Ve,Me,Ue,Be,$e),qe=function(t,e,n,r){function i(t){return function(){return t}}var o,s=function(t,o,s,a){if(t===o)return i(o);if(a){var u=r.registries.interpolators.find(s,a);if(u)return u(t,o)||i(o);e('Missing "'+a+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(t,o)||n.array(t,o)||n.object(t,o)||i(o)};return t.interpolate=s,o=s}(n,F,a,ze),He=function(t,e,n){var r=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};return r.prototype={tick:function(){var n,r,i,o,s,a;return a=this.keypath,this.running?(o=Date.now(),n=o-this.startTime,n>=this.duration?(null!==a&&(e.start(this.root),this.root.viewmodel.set(a,this.to),e.end()),this.step&&this.step(1,this.to),this.complete(this.to),s=this.root._animations.indexOf(this),-1===s&&t("Animation was not found"),this.root._animations.splice(s,1),this.running=!1,!1):(r=this.easing?this.easing(n/this.duration):n/this.duration,null!==a&&(i=this.interpolator(r),e.start(this.root),this.root.viewmodel.set(a,i),e.end()),this.step&&this.step(r,i),!0)):!1},stop:function(){var e;this.running=!1,e=this.root._animations.indexOf(this),-1===e&&t("Animation was not found"),this.root._animations.splice(e,1)}},r}(F,b,qe),Ge=function(t,e,n,r,i){function o(e,o,s,a){var c,h,l,f;return o&&(o=n(o)),null!==o&&(f=e.viewmodel.get(o)),r.abort(o,e),t(f,s)?(a.complete&&a.complete(a.to),u):(a.easing&&(c="function"==typeof a.easing?a.easing:e.easing[a.easing],"function"!=typeof c&&(c=null)),h=void 0===a.duration?400:a.duration,l=new i({keypath:o,from:f,to:s,root:e,duration:h,easing:c,interpolator:a.interpolator,step:a.step,complete:a.complete}),r.add(l),e._animations.push(l),l)}var s,a=function(){},u={stop:a};return s=function(t,n,r){var i,s,u,c,h,l,f,d,p,v,m,g,y,b;if(i=new e(function(t){s=t}),"object"==typeof t){r=n||{},l=r.easing,f=r.duration,h=[],d=r.step,p=r.complete,(d||p)&&(m={},r.step=null,r.complete=null,v=function(t){return function(e,n){m[t]=n}});for(u in t)t.hasOwnProperty(u)&&((d||p)&&(g=v(u),r={easing:l,duration:f},d&&(r.step=g)),r.complete=p?g:a,h.push(o(this,u,t[u],r)));return b={easing:l,duration:f},d&&(b.step=function(t){d(t,m)}),p&&i.then(function(t){p(t,m)}),b.complete=s,y=o(this,null,null,b),h.push(y),i.stop=function(){for(var t;t=h.pop();)t.stop();y&&y.stop()},i}return r=r||{},r.complete&&i.then(r.complete),r.complete=s,c=o(this,t,n,r),i.stop=function(){c.stop()},i}}(v,f,N,P,He),Ze=function(t){return function(){return this.detached?this.detached:(this.el&&t(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),this.detached)}}(l),Ke=function(t){return this.el?this.fragment.find(t):null},Qe=function(t,e,n){var r,i,o,s,a,u,c,h;if(t){for(i=n("div"),o=["matches","matchesSelector"],h=function(t){return function(e,n){return e[t](n)}},u=o.length;u--&&!r;)if(s=o[u],i[s])r=h(s);else for(c=e.length;c--;)if(a=e[u]+s.substr(0,1).toUpperCase()+s.substring(1),i[a]){r=h(a);break}r||(r=function(t,e){var n,r,o;for(r=t.parentNode,r||(i.innerHTML="",r=i,t=t.cloneNode(),i.appendChild(t)),n=r.querySelectorAll(e),o=n.length;o--;)if(n[o]===t)return!0;return!1})}else r=null;return r}(A,R,k),Ye=function(t){return function(e,n){var r=this._isComponentQuery?!this.selector||e.name===this.selector:t(e.node,this.selector);return r?(this.push(e.node||e.instance),n||this._makeDirty(),!0):void 0}}(Qe),Je=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},Xe=function(){function t(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function e(e){var n,r;for(n=[e],r=t(e);r;)n.push(r),r=t(r);return n}var n;return n=function(t,n){var r,i,o,s,a,u,c,h,l,f;for(r=e(t.component||t._ractive.proxy),i=e(n.component||n._ractive.proxy),o=r[r.length-1],s=i[i.length-1];o&&o===s;)r.pop(),i.pop(),a=o,o=r[r.length-1],s=i[i.length-1];if(o=o.component||o,s=s.component||s,l=o.parentFragment,f=s.parentFragment,l===f)return u=l.items.indexOf(o),c=f.items.indexOf(s),u-c||r.length-i.length;if(h=a.fragments)return u=h.indexOf(l),c=h.indexOf(f),u-c||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),tn=function(t){return function(e,n){var r;return e.compareDocumentPosition?(r=e.compareDocumentPosition(n),2&r?1:-1):t(e,n)}}(Xe),en=function(t,e){return function(){this.sort(this._isComponentQuery?e:t),this._dirty=!1}}(tn,Xe),nn=function(t){return function(){var e=this;this._dirty||(this._dirty=!0,t.scheduleTask(function(){e._sort()}))}}(b),rn=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},on=function(t,e,n,r,i,o){return function(s,a,u,c){var h=[];return t(h,{selector:{value:a},live:{value:u},_isComponentQuery:{value:c},_test:{value:e}}),u?(t(h,{cancel:{value:n},_root:{value:s},_sort:{value:r},_makeDirty:{value:i},_remove:{value:o},_dirty:{value:!1,writable:!0}}),h):h}}(O,Ye,Je,en,nn,rn),sn=function(t){return function(e,n){var r,i;return this.el?(n=n||{},r=this._liveQueries,(i=r[e])?n&&n.live?i:i.slice():(i=t(this,e,!!n.live,!1),i.live&&(r.push(e),r["_"+e]=i),this.fragment.findAll(e,i),i)):[]}}(on),an=function(t){return function(e,n){var r,i;return n=n||{},r=this._liveComponentQueries,(i=r[e])?n&&n.live?i:i.slice():(i=t(this,e,!!n.live,!0),i.live&&(r.push(e),r["_"+e]=i),this.fragment.findAllComponents(e,i),i)}}(on),un=function(t){return this.fragment.findComponent(t)},cn=function(t){return function(e){var n={args:Array.prototype.slice.call(arguments,1)};t(this,e,n)}}(h),hn=function(t){var e={capture:!0};return function(n){return n=t(n),this.viewmodel.get(n,e)}}(N),ln=function(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null},fn=function(t){return function(e,n){if(!this.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null}}(ln),dn=function(t,e,n){return function(r,i,o){var s,a;return r=n(r),s=this.viewmodel.get(r),e(s)&&e(i)?(a=t.start(this,!0),this.viewmodel.merge(r,s,i,o),t.end(),o&&o.complete&&a.then(o.complete),a):this.set(r,i,o&&o.complete)}}(b,i,N),pn=function(t,e){var n=function(t,e,n,r){this.root=t,this.keypath=e,this.callback=n,this.defer=r.defer,this.priority=0,this.context=r&&r.context?r.context:t};return n.prototype={init:function(t){this.value=this.root.viewmodel.get(this.keypath),t!==!1?this.update():this.oldValue=this.value},setValue:function(n){var r=this;e(n,this.value)||(this.value=n,this.defer&&this.ready?t.scheduleTask(function(){return r.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1)}},n}(b,v),vn=function(t){return function(e,n){function r(n,r){var i,o,s;i=e.viewmodel.wrapped[r]?e.viewmodel.wrapped[r].get():e.get(r);for(o in i)!i.hasOwnProperty(o)||"_ractive"===o&&t(i)||(s=r?r+"."+o:o,n.push(s));return n}function i(t){return function(e){return e?e+"."+t:t}}var o,s,a;for(o=n.split("."),a=[""];s=o.shift();)"*"===s?a=a.reduce(r,[]):""===a[0]?a[0]=s:a=a.map(i(s));return a}}(i),mn=function(t){return function(e,n){var r,i;return r=t(e,n),i={},r.forEach(function(t){i[t]=e.get(t)}),i}}(vn),gn=function(t,e,n){var r,i=/\*/,o=Array.prototype.slice;return r=function(t,e,n,r){this.root=t,this.callback=n,this.defer=r.defer,this.keypath=e,this.regex=new RegExp("^"+e.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:t},r.prototype={init:function(t){var e,r;if(e=n(this.root,this.keypath),t!==!1)for(r in e)e.hasOwnProperty(r)&&this.update(r);else this.values=e},update:function(e){var r,o=this;if(i.test(e)){r=n(this.root,e);for(e in r)r.hasOwnProperty(e)&&this.update(e)}else if(!this.root.viewmodel.implicitChanges[e])return this.defer&&this.ready?void t.scheduleTask(function(){return o.getProxy(e).update()}):void this.reallyUpdate(e)},reallyUpdate:function(t){var n,r,i;return n=this.root.viewmodel.get(t),this.updating?void(this.values[t]=n):(this.updating=!0,e(n,this.values[t])&&this.ready||(r=o.call(this.regex.exec(t),1),i=[n,this.values[t],t].concat(r),this.callback.apply(this.context,i),this.values[t]=n),void(this.updating=!1))
},getProxy:function(t){var e=this;return this.proxies[t]||(this.proxies[t]={update:function(){e.reallyUpdate(t)}}),this.proxies[t]}},r}(b,v,mn),yn=function(t,e,n){var r=/\*/,i={};return function(o,s,a,u){var c,h,l;return s=t(s),u=u||i,r.test(s)?(c=new n(o,s,a,u),o.viewmodel.patternObservers.push(c),h=!0):c=new e(o,s,a,u),o.viewmodel.register(s,c,h?"patternObservers":"observers"),c.init(u.init),c.ready=!0,{cancel:function(){var t;l||(h?(t=o.viewmodel.patternObservers.indexOf(c),o.viewmodel.patternObservers.splice(t,1),o.viewmodel.unregister(s,c,"patternObservers")):o.viewmodel.unregister(s,c,"observers"),l=!0)}}}}(N,pn,gn),bn=function(t,e){return function(n,r,i){var o,s,a,u;if(t(n)){i=r,s=n,o=[];for(n in s)s.hasOwnProperty(n)&&(r=s[n],o.push(this.observe(n,r,i)));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}if("function"==typeof n)return i=r,r=n,n="",e(this,n,r,i);if(a=n.split(" "),1===a.length)return e(this,n,r,i);for(o=[],u=a.length;u--;)n=a[u],n&&o.push(e(this,n,r,i));return{cancel:function(){for(;o.length;)o.pop().cancel()}}}}(o,yn),wn=function(t){return t.trim()},En=function(t){return""!==t},xn=function(t,e){return function(n,r){var i,o=this;if(n)i=n.split(" ").map(t).filter(e),i.forEach(function(t){var e,n;(e=o._subs[t])&&(r?(n=e.indexOf(r),-1!==n&&e.splice(n,1)):o._subs[t]=[])});else for(n in this._subs)delete this._subs[n];return this}}(wn,En),_n=function(t,e){return function(n,r){var i,o,s,a=this,u=this;if("object"==typeof n){i=[];for(o in n)n.hasOwnProperty(o)&&i.push(this.on(o,n[o]));return{cancel:function(){for(var t;t=i.pop();)t.cancel()}}}return s=n.split(" ").map(t).filter(e),s.forEach(function(t){(a._subs[t]||(a._subs[t]=[])).push(r)}),{cancel:function(){u.off(n,r)}}}}(wn,En),kn=function(t,e,n){switch(e){case"splice":return n;case"sort":case"reverse":return null;case"pop":return t.length?[-1]:null;case"push":return[t.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},An=function(t,e){var n,r,i,o,s,a;return e?(n=+(e[0]<0?t.length+e[0]:e[0]),0>n?n=0:n>t.length&&(n=t.length),o=Math.max(0,e.length-2),s=void 0!==e[1]?e[1]:t.length-n,s=Math.min(s,t.length-n),a=o-s,i=t.length+a,r=a?Math.max(t.length,i):n+o,{rangeStart:n,rangeEnd:r,balance:a,added:o,removed:s}):null},Tn=function(t,e,n,r){var i=Array.prototype;return function(o){return function(s){var a,u,c,h,l,f=Array.prototype.slice,d=f.call(arguments,1);if(a=this.get(s),!t(a))throw new Error("Called ractive."+o+"('"+s+"'), but '"+s+"' does not refer to an array");return u=n(a,o,d),c=r(a,u),l=c?i.splice.apply(a,u):i[o].apply(a,d),h=e.start(this,!0),c?this.viewmodel.splice(s,c):this.viewmodel.mark(s),e.end(),("splice"===o||"pop"===o||"shift"===o)&&(h=h.then(function(){return l})),h}}}(i,b,kn,An),On=function(t){return t("pop")}(Tn),Cn=function(t){return t("push")}(Tn),Sn=function(t,e,n){var r,i,o,s,a,u,c,h="/* Ractive.js component styles */\n",l={},f=[];return e?(t.push(function(){o=t.runloop}),s=document.createElement("style"),s.type="text/css",a=document.getElementsByTagName("head")[0],c=!1,u=s.styleSheet,i=function(){var t;f.length?(t=h+f.join(" "),u?u.cssText=t:s.innerHTML=t,c||(a.appendChild(s),c=!0)):c&&(a.removeChild(s),c=!1)},r={add:function(t){t.css&&(l[t._guid]||(l[t._guid]=0,f.push(t.css),o.scheduleTask(i)),l[t._guid]+=1)},remove:function(t){t.css&&(l[t._guid]-=1,l[t._guid]||(n(f,t.css),o.scheduleTask(i)))}}):r=null,r}(n,A,l),Nn=function(t,e,n){function r(t){var e=i(t);for(t.init&&t.init(t._config.options);e.length;)r(e.shift());s[t._guid]=null}function i(t){return s[t._guid]||(s[t._guid]=[])}var o,s={},a={};return o=function(o,s){var u,c,h,l=this;if(a[this._guid]=!0,h=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),u=t.start(this,!0),this.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return o=n(o)||this.el,s=n(s)||this.anchor,this.el=o,this.anchor=s,this.constructor.css&&e.add(this.constructor),o&&((c=o.__ractive_instances__)?c.push(this):o.__ractive_instances__=[this],s?o.insertBefore(this.fragment.render(),s):o.appendChild(this.fragment.render())),this._hasInited||(this._hasInited=!0,this._parent&&a[this._parent._guid]?i(this._parent).push(this):r(this)),a[this._guid]=!1,t.end(),this.rendered=!0,this.transitionsEnabled=h,this.complete&&u.then(function(){return l.complete()}),u}}(b,Sn,ln),Rn=function(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()},In=function(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.detach())}),t)},Ln=function(t){var e,n,r,i;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(r=this.items[e],r.find&&(i=r.find(t)))return i;return null}},Pn=function(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAll&&i.findAll(t,e);return e},Fn=function(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(t,e);return e},Mn=function(t){var e,n,r,i;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(t)))return i;return null}},jn=function(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},Vn=function(){return this.items&&this.items[0]?this.items[0].firstNode():null},Dn=function(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el},Un=function(t){function e(t,n,r,i){return i=i||0,t.map(function(t){var o,s,a;return t.text?t.text:t.fragments?t.fragments.map(function(t){return e(t.items,n,r,i)}).join(""):(o=r+"-"+i++,a=(s=t.root.viewmodel.wrapped[t.keypath])?s.value:t.getValue(),n[o]=a,"${"+o+"}")}).join("")}var n,r={};return n=function(){var n=arguments[0];void 0===n&&(n=r);var i,o,s,a,u,c,h;return i=n.args,u=i?"argsList":"value",c=i?"dirtyArgs":"dirtyValue",this[c]&&(s=e(this.items,o={},this.root._guid),a=t(i?"["+s+"]":s,o),h=a?a.value:i?[this.toString()]:this.toString(),this[u]=h,this[c]=!1),this[u]}}(Ce),Wn=function(){var t=/</g,e=/>/g;return function(n){return n.replace(t,"&lt;").replace(e,"&gt;")}}(),Bn=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t},$n=function(t){return function(){return t(this.node)}}(Bn),zn=function(t,e,n,r){var i=function(e){this.type=t.TEXT,this.text=e.template};return i.prototype={detach:n,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(r(this.text))),this.node},toString:function(t){return t?e(this.text):this.text},unrender:function(t){return t?this.detach():void 0}},i}(W,Wn,$n,Te),qn=function(t){return function(){this.keypath?this.root.viewmodel.unregister(this.keypath,this):t.removeUnresolved(this),this.resolver&&this.resolver.unbind()}}(b),Hn=function(){return this.value},Gn=function(t){var e=function(e,n,r,i){this.root=e,this.ref=n,this.parentFragment=r,this.resolve=i,t.addUnresolved(this)};return e.prototype={unbind:function(){t.removeUnresolved(this)}},e}(b),Zn=function(t,e){return t&&e&&t.substr(0,e.length+1)===e+"."},Kn=function(t){return function(e,n,r){return e===n?void 0!==r?r:null:t(e,n)?null===r?r:e.replace(n+".",r+"."):void 0}}(Zn),Qn=function(t,e){function n(t){var n=e[t.message]||t.message||"";return r(n,t.args)}function r(t,e){return t.replace(/{([^{}]*)}/g,function(t,n){return e[n]})}var i={warn:function(t,e){(t.debug||e)&&this.logger(n(t),t.allowDuplicates)},error:function(t){this.errorOnly(t),t.debug||this.warn(t,!0)},errorOnly:function(t){t.debug&&this.critical(t)},critical:function(t){var e=t.err||new Error(n(t));this.thrower(e)},logger:t,thrower:function(t){throw t}};return i}(F,U),Yn=function(){var t={};return function(e,n){var r,i;if(t[e])return t[e];for(i=[];n--;)i[n]="_"+n;return r=new Function(i.join(","),"return("+e+")"),t[e]=r,r}}(),Jn=function(t,e,n){var r,i;for(r=e.length;r--;)i=e[r],-1===n.indexOf(i)&&t.viewmodel.unregister(i,t,"computed");for(r=n.length;r--;)i=n[r],-1===e.indexOf(i)&&t.viewmodel.register(i,t,"computed");t.dependencies=n.slice()},Xn=function(t,e,n,r,i){function o(t,e){var r,i,o;if(t._noWrap)return t;if(i="__ractive_"+e._guid,r=t[i])return r;if(/this/.test(t.toString())){n(t,i,{value:c.call(t,e)});for(o in t)t.hasOwnProperty(o)&&(t[i][o]=t[o]);return t[i]}return n(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function s(t){return"function"==typeof t?t():t}var a,u,c=Function.prototype.bind;return u=function(t,e,n,i,s,a){var u=this,c=t.viewmodel;u.root=t,u.viewmodel=c,u.uniqueString=n,u.keypath=e,u.priority=a,u.fn=r(i,s.length),u.explicitDependencies=[],u.dependencies=[],u.argumentGetters=s.map(function(e){var n,r;return e?e.indexRef?r=e.value:(n=e.keypath,u.explicitDependencies.push(n),c.register(n,u,"computed"),function(){var e=c.get(n);return"function"==typeof e?o(e,t):e}):void 0})},u.prototype={wake:function(){this.awake=!0},sleep:function(){this.awake=!1},getValue:function(){var e,n,r;if(e=this.argumentGetters.map(s),!this.updating){this.updating=!0,this.viewmodel.capture();try{n=this.fn.apply(null,e)}catch(o){this.root.debug&&t.warn({debug:this.root.debug,message:"evaluationError",args:{uniqueString:this.uniqueString,err:o.message||o}}),n=void 0}return r=this.viewmodel.release(),i(this,this.dependencies,r),this.updating=!1,n}},update:function(){var t=this.getValue();return e(t,this.value)||(this.value=t,this.root.viewmodel.mark(this.keypath)),this},teardown:function(){var t=this;this.explicitDependencies.concat(this.dependencies).forEach(function(e){return t.viewmodel.unregister(e,t,"computed")}),this.root.viewmodel.evaluators[this.keypath]=null}},a=u}(Qn,v,T,Yn,Jn,ye),tr=function(t,e,n,r,i){function o(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var r=e[n];return r?r.indexRef?r.value:r.keypath:"undefined"})}function s(t){return"${"+t.replace(/[\.\[\]]/g,"-")+"}"}var a,u=function(r,i,o,s){var a,u,c,h=this;return a=r.root,this.root=a,this.callback=s,this.owner=r,this.str=o.s,this.args=c=[],this.unresolved=[],this.pending=0,u=i.indexRefs,o.r&&o.r.length?(o.r.forEach(function(r,o){var s,l,f;return u&&void 0!==(s=u[r])?void(c[o]={indexRef:r,value:s}):(l=e(a,r,i))?void(c[o]={keypath:l}):"."===r?void(c[o]={"":""}):(c[o]=null,h.pending+=1,f=new n(a,r,i,function(e){h.resolve(o,e),t(h.unresolved,f)}),void h.unresolved.push(f))}),this.ready=!0,void this.bubble()):(this.resolved=this.ready=!0,void this.bubble())};return u.prototype={bubble:function(){this.ready&&(this.uniqueString=o(this.str,this.args),this.keypath=s(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.unresolved.pop();)t.unbind()},resolve:function(t,e){this.args[t]={keypath:e},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var t=this.root.viewmodel.evaluators[this.keypath];t||(t=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root.viewmodel.evaluators[this.keypath]=t),t.update()},rebind:function(t,e,n,r){var o;this.args.forEach(function(s){var a;s&&(s.keypath&&(a=i(s.keypath,n,r))?(s.keypath=a,o=!0):s.indexRef&&s.indexRef===t&&(s.value=e,o=!0))}),o&&this.bubble()}},a=u}(l,g,Gn,Xn,Kn),er=function(t,e,n,r,i){var o=function(r,o,s){var a,u,c,h,l,f=this;f.resolver=o,f.root=o.root,f.viewmodel=o.root.viewmodel,"string"==typeof r?f.value=r:r.t===t.REFERENCE?(a=f.ref=r.n,(u=s.indexRefs)&&void 0!==(c=u[a])?(f.indexRef=a,f.value=c):(h=o.root,(l=e(h,a,s))?f.resolve(l):f.unresolved=new n(h,a,s,function(t){f.unresolved=null,f.resolve(t)}))):new i(o,s,r,function(t){f.resolve(t)})};return o.prototype={resolve:function(t){this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e,n,i){var o;if(t&&this.indexRef===t){if(e!==this.value)return this.value=e,!0}else if(this.keypath&&(o=r(this.keypath,n,i)))return this.unbind(),this.keypath=o,this.value=this.root.viewmodel.get(o),this.bind(),!0},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.root.viewmodel.unregister(this.keypath,this),this.unresolved&&this.unresolved.unbind()},forceResolution:function(){this.unresolved&&(this.unresolved.unbind(),this.unresolved=null,this.keypath=this.ref,this.value=this.viewmodel.get(this.ref),this.bind())}},o}(W,g,Gn,Kn,tr),nr=function(t,e,n){function r(t){return t.value}function i(t){return void 0!=t}function o(t){t.unbind()}var s=function(r,i,o){var s,a,u,c,h=this,l=this;c=r.parentFragment,l.root=s=r.root,l.mustache=r,l.priority=r.priority,l.ref=a=i.r,l.callback=o,l.unresolved=[],(u=t(s,a,c))?l.base=u:l.baseResolver=new e(s,a,c,function(t){l.base=t,l.baseResolver=null,l.bubble()}),l.members=i.m.map(function(t){return new n(t,h,c)}),l.ready=!0,l.bubble()};return s.prototype={getKeypath:function(){var t=this.members.map(r);return!t.every(i)||this.baseResolver?null:this.base+"."+t.join(".")},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(o)},rebind:function(t,e,n,r){var i;this.members.forEach(function(o){o.rebind(t,e,n,r)&&(i=!0)}),i&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(function(t){return t.forceResolution()}),this.bubble()}},s}(g,Gn,er),rr=function(t,e,n,r,i){return function(o,s){function a(t){var e=o.keypath;t!==e&&(o.resolve(t),void 0!==e&&o.fragments&&o.fragments.forEach(function(n){n.rebind(null,null,e,t)}))}var u,c,h,l,f,d;if(f=s.parentFragment,d=s.template,o.root=f.root,o.parentFragment=f,o.pElement=f.pElement,o.template=s.template,o.index=s.index||0,o.priority=f.priority,o.isStatic=s.template.s,o.type=s.template.t,u=d.r){if(h=f.indexRefs,h&&void 0!==(l=h[u]))return o.indexRef=u,void o.setValue(l);c=n(o.root,u,o.parentFragment),void 0!==c?o.resolve(c):(o.ref=u,e.addUnresolved(o))}s.template.x&&(o.resolver=new i(o,f,s.template.x,a)),s.template.rx&&(o.resolver=new r(o,s.template.rx,a)),o.template.n!==t.SECTION_UNLESS||o.hasOwnProperty("value")||o.setValue(void 0)}}(W,b,g,nr,tr),ir=function(t){var e,n,r;void 0!=this.keypath&&(this.root.viewmodel.unregister(this.keypath,this),e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this)),this.setValue(n),e&&(r=this.twowayBinding)&&r.rebound()},or=function(t){return function(e,n,r,i){var o;this.fragments&&this.fragments.forEach(function(t){return t.rebind(e,n,r,i)}),this.resolver&&this.resolver.rebind(e,n,r,i),void 0!==this.keypath?(o=t(this.keypath,r,i),void 0!==o&&this.resolve(o)):void 0!==e&&this.indexRef===e&&this.setValue(n)}}(Kn),sr=function(t,e,n,r){return{getValue:t,init:e,resolve:n,rebind:r}}(Hn,rr,ir,or),ar=function(t,e,n,r,i,o,s,a){var u=function(e){this.type=t.INTERPOLATOR,s.init(this,e)};return u.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:s.resolve,rebind:s.rebind,detach:a,unbind:o,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(t){t&&r(this.node)},getValue:s.getValue,setValue:function(t){var n;(n=this.root.viewmodel.wrapped[this.keypath])&&(t=n.get()),i(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&e.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=void 0!=this.value?""+this.value:"";return t?n(e):e}},u}(W,b,Wn,Bn,v,qn,sr,$n),ur=function(){this.parentFragment.bubble()},cr=function(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)},hr=function(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].find(t))return r;return null},lr=function(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(t,e)},fr=function(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(t,e)},dr=function(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].findComponent(t))return r;return null},pr=function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},vr=function(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)},mr=function(t,e){var n;return e.push(function(){n=e.Fragment}),function(e){var n,r,i,o,s,a,u,c,h=this;if(!this.unbound){if(n=this.parentFragment,s=[],e.forEach(function(t,e){var n,i,o,a;return t===e?void(s[t]=h.fragments[e]):(n=h.fragments[e],void 0===r&&(r=e),-1===t?(h.fragmentsToUnrender.push(n),void n.unbind()):(i=t-e,o=h.keypath+"."+e,a=h.keypath+"."+t,n.rebind(h.template.i,t,o,a),void(s[t]=n)))}),o=this.root.get(this.keypath).length,void 0===r){if(this.length===o)return;r=this.length}for(this.length=this.fragments.length=o,t.addView(this),a={template:this.template.f,root:this.root,owner:this},this.template.i&&(a.indexRef=this.template.i),i=r;o>i;i+=1)(u=s[i])?this.docFrag.appendChild(u.detach(!1)):this.fragmentsToCreate.push(i),this.fragments[i]=u;c=n.findNextNode(this),this.parentFragment.getNode().insertBefore(this.docFrag,c)}}}(b,n),gr=function(){var t;return t=this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,t},yr=function(t,e,n,r,i){function o(r,i){var o={template:r.template.f,root:r.root,pElement:r.parentFragment.pElement,owner:r};if(r.subtype)switch(r.subtype){case t.SECTION_IF:return c(r,i,!1,o);case t.SECTION_UNLESS:return c(r,i,!0,o);case t.SECTION_WITH:return u(r,o);case t.SECTION_EACH:if(n(i))return a(r,i,o)}return r.ordered=!!e(i),r.ordered?s(r,i,o):n(i)||"function"==typeof i?r.template.i?a(r,i,o):u(r,o):c(r,i,!1,o)}function s(t,e,n){var r,i,o;if(i=e.length,i===t.length)return!1;if(i<t.length)t.fragmentsToUnrender=t.fragments.splice(i,t.length-i),t.fragmentsToUnrender.forEach(h);else if(i>t.length)for(r=t.length;i>r;r+=1)n.context=t.keypath+"."+r,n.index=r,t.template.i&&(n.indexRef=t.template.i),o=new d(n),t.fragmentsToRender.push(t.fragments[r]=o);return t.length=i,!0}function a(t,e,n){var r,i,o,s,a;for(o=t.hasKey||(t.hasKey={}),i=t.fragments.length;i--;)s=t.fragments[i],s.index in e||(a=!0,s.unbind(),t.fragmentsToUnrender.push(s),t.fragments.splice(i,1),o[s.index]=!1);for(r in e)o[r]||(a=!0,n.context=t.keypath+"."+r,n.index=r,t.template.i&&(n.indexRef=t.template.i),s=new d(n),t.fragmentsToRender.push(s),t.fragments.push(s),o[r]=!0);return t.length=t.fragments.length,a}function u(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new d(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function c(t,n,r,i){var o,s,a;if(s=e(n)&&0===n.length,o=r?s||!n:n&&!s){if(!t.length)return i.index=0,a=new d(i),t.fragmentsToRender.push(t.fragments[0]=a),t.length=1,!0;if(t.length>1)return t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(h),!0}else if(t.length)return t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(l),t.fragmentsToUnrender.forEach(h),t.length=t.fragmentsToRender.length=0,!0}function h(t){t.unbind()}function l(t){return t.rendered}var f,d;return i.push(function(){d=i.Fragment}),f=function(t){var e,n,i=this;this.updating||(this.updating=!0,(e=this.root.viewmodel.wrapped[this.keypath])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f,root:this.root,pElement:this.pElement,owner:this,indexRef:this.template.i},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath+"."+t,n.index=t,e=new d(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):o(this,t)&&(this.bubble(),this.rendered&&r.addView(this)),this.value=t,this.updating=!1)}}(W,i,o,b,n),br=function(t,e){function n(t){t.unbind()}function r(t,e){var n,r=[];for(n=t;e>n;n+=1)r.push(n);return r}function i(t,e,n,r){var i,o,s,a,u;for(s=t.template.i,i=e;n>i;i+=1)o=t.fragments[i],a=t.keypath+"."+(i-r),u=t.keypath+"."+i,o.index=i,o.rebind(s,i,a,u)}var o,s;return e.push(function(){s=e.Fragment}),o=function(e){var o,s,a,u,c,h=this;if(!this.unbound&&(o=e.balance)){if(t.addView(h),s=e.rangeStart,h.length+=o,0>o)return h.fragmentsToUnrender=h.fragments.splice(s,-o),h.fragmentsToUnrender.forEach(n),void i(h,s,h.length,o);a=s+e.removed,u=s+e.added,c=[a,0],c.length+=o,h.fragments.splice.apply(h.fragments,c),i(h,u,h.length,o),h.fragmentsToCreate=r(a,u)}}}(b,n),wr=function(t){var e,n,r;for(e="",n=0,r=this.length,n=0;r>n;n+=1)e+=this.fragments[n].toString(t);return e},Er=function(t){function e(t){t.unbind()}var n;return n=function(){this.fragments.forEach(e),t.call(this),this.length=0,this.unbound=!0}}(qn),xr=function(){function t(t){t.unrender(!0)}function e(t){t.unrender(!1)}var n;return n=function(n){this.fragments.forEach(n?t:e)}}(),_r=function(){for(var t,e,n,r,i;t=this.fragmentsToUnrender.pop();)t.unrender(!0);if(this.fragmentsToRender.length){for(this.rendered&&(i=this.parentFragment.getNode());t=this.fragmentsToRender.shift();)e=t.render(),this.docFrag.appendChild(e),this.rendered&&this.ordered&&(n=this.fragments[t.index+1],n&&n.rendered&&i.insertBefore(this.docFrag,n.firstNode()||null));this.rendered&&this.docFrag.childNodes.length&&(r=this.parentFragment.findNextNode(this),i.insertBefore(this.docFrag,r))}},kr=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,m,g){var y=function(n){this.type=t.SECTION,this.subtype=n.template.n,this.inverted=this.subtype===t.SECTION_UNLESS,this.pElement=n.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],this.length=0,e.init(this,n)};return y.prototype={bubble:n,detach:r,find:i,findAll:o,findAllComponents:s,findComponent:a,findNextNode:u,firstNode:c,getValue:e.getValue,merge:h,rebind:e.rebind,render:l,resolve:e.resolve,setValue:f,splice:d,toString:p,unbind:v,unrender:m,update:g},y}(W,sr,ur,cr,hr,lr,fr,dr,pr,vr,mr,gr,yr,br,wr,Er,xr,_r),Ar=function(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}},Tr=function(t){return function(e){var n,r,i,o;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType){if(t(i,e))return i;if(o=i.querySelector(e))return o}return null}}(Qe),Or=function(t){return function(e,n){var r,i,o,s,a,u;for(i=this.nodes.length,r=0;i>r;r+=1)if(o=this.nodes[r],1===o.nodeType&&(t(o,e)&&n.push(o),s=o.querySelectorAll(e)))for(a=s.length,u=0;a>u;u+=1)n.push(s[u])}}(Qe),Cr=function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},Sr=function(t,e){function n(t){return s[t]||(s[t]=e(t))}var r,i,o,s={};try{e("table").innerHTML="foo"}catch(a){i=!0,o={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return r=function(e,r,s){var a,u,c,h,l,f=[];if(null!=e&&""!==e){for(i&&(u=o[r.tagName])?(a=n("DIV"),a.innerHTML=u[0]+e+u[1],a=a.querySelector(".x"),"SELECT"===a.tagName&&(c=a.options[a.selectedIndex])):r.namespaceURI===t.svg?(a=n("DIV"),a.innerHTML='<svg class="x">'+e+"</svg>",a=a.querySelector(".x")):(a=n(r.tagName),a.innerHTML=e);h=a.firstChild;)f.push(h),s.appendChild(h);if(i&&"SELECT"===r.tagName)for(l=f.length;l--;)f[l]!==c&&(f[l].selected=!1)}return f}}(_,k),Nr=function(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e},Rr=function(t){function e(t){return t.selected}var n;return n=function(n){var r,i,o;n&&"select"===n.name&&n.binding&&(r=t(n.node.options).filter(e),n.getAttribute("multiple")?o=r.map(function(t){return t.value}):(i=r[0])&&(o=i.value),void 0!==o&&n.binding.setValue(o),n.bubble())}}(Nr),Ir=function(t,e){return function(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=t(this.value,this.parentFragment.getNode(),this.docFrag),e(this.pElement),this.rendered=!0,this.docFrag}}(Sr,Rr),Lr=function(t){return function(e){var n;(n=this.root.viewmodel.wrapped[this.keypath])&&(e=n.get()),e!==this.value&&(this.value=e,this.parentFragment.bubble(),this.rendered&&t.addView(this))}}(b),Pr=function(t){return function(){return void 0!=this.value?t(""+this.value):""}}(Te),Fr=function(t){return function(e){this.rendered&&e&&(this.nodes.forEach(t),this.rendered=!1)}}(Bn),Mr=function(t,e){return function(){var n,r;if(this.rendered){for(;this.nodes&&this.nodes.length;)n=this.nodes.pop(),n.parentNode.removeChild(n);r=this.parentFragment.getNode(),this.nodes=t(this.value,r,this.docFrag),r.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),e(this.pElement)}}}(Sr,Rr),jr=function(t,e,n,r,i,o,s,a,u,c,h,l){var f=function(n){this.type=t.TRIPLE,e.init(this,n)};return f.prototype={detach:n,find:r,findAll:i,firstNode:o,getValue:e.getValue,rebind:e.rebind,render:s,resolve:e.resolve,setValue:a,toString:u,unbind:l,unrender:c,update:h},f}(W,sr,Ar,Tr,Or,Cr,Ir,Lr,Pr,Fr,Mr,qn),Vr=function(){this.parentFragment.bubble()},Dr=function(){var t,e=this.node;return e?((t=e.parentNode)&&t.removeChild(e),e):void 0},Ur=function(t){return function(e){return t(this.node,e)?this.node:this.fragment&&this.fragment.find?this.fragment.find(e):void 0}}(Qe),Wr=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Br=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},$r=function(t){return this.fragment?this.fragment.findComponent(t):void 0},zr=function(){return null},qr=function(){return this.node},Hr=function(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0},Gr=function(){var t,e,n,r;return t="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),e="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},r=n(t.concat(e)),function(t){var e=t.toLowerCase();return r[e]||e}}(),Zr=function(t){return function(){var e=this.fragment.getValue();e!==this.value&&("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=e,"value"===this.name&&this.node&&(this.node._ractive.value=e),this.rendered&&t.addView(this))}}(b),Kr=function(){var t=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;return t}(),Qr=function(t,e){return function(n,r){var i,o;if(i=r.indexOf(":"),-1===i||(o=r.substr(0,i),"xmlns"===o))n.name=n.element.namespace!==t.html?e(r):r;else if(r=r.substring(i+1),n.name=e(r),n.namespace=t[o.toLowerCase()],!n.namespace)throw'Unknown namespace ("'+o+'")'}}(_,Gr),Yr=function(t){return function(e){var n=e.fragment.items;if(1===n.length)return n[0].type===t.INTERPOLATOR?n[0]:void 0}}(W),Jr=function(t,e){var n={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(r,i){var o;!r.pNode||r.namespace||i.pNode.namespaceURI&&i.pNode.namespaceURI!==t.html||(o=n[r.name]||r.name,void 0!==i.pNode[o]&&(r.propertyName=o),(e.test(o)||"value"===o)&&(r.useProperty=!0))}}(_,Kr),Xr=function(t,e,n,r,i,o){var s;return o.push(function(){s=o.Fragment}),function(o){return this.type=t.ATTRIBUTE,this.element=o.element,this.root=o.root,n(this,o.name),o.value&&"string"!=typeof o.value?(this.parentFragment=this.element.parentFragment,this.fragment=new s({template:o.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=r(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,i(this,o),void(this.ready=!0)):void(this.value=e.test(this.name)?!0:o.value||"")}}(W,Kr,Qr,Yr,Jr,n),ti=function(t,e,n,r){this.fragment&&this.fragment.rebind(t,e,n,r)},ei=function(t,e){var n={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(r){var i;this.node=r,r.namespaceURI&&r.namespaceURI!==t.html||(i=n[this.name]||this.name,void 0!==r[i]&&(this.propertyName=i),(e.test(i)||"value"===i)&&(this.useProperty=!0),"value"===i&&(this.useProperty=!0,r._ractive.value=this.value)),this.rendered=!0,this.update()}}(_,Kr),ni=function(t){function e(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var n;return n=function(){var n=(o=this).name,r=o.value,i=o.interpolator,o=o.fragment;if(("value"!==n||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==n||void 0===this.element.getAttribute("contenteditable")))return"name"===n&&"input"===this.element.name&&i?"name={{"+(i.keypath||i.ref)+"}}":t.test(n)?r?n:"":(o&&(r=o.toString()),r?n+'="'+e(r)+'"':n)}}(Kr),ri=function(){this.fragment&&this.fragment.unbind()},ii=function(){var t,e,n,r,i=this.value;if(!this.locked)for(this.node._ractive.value=i,t=this.node.options,r=t.length;r--;)if(e=t[r],n=e._ractive?e._ractive.value:e.value,n==i){e.selected=!0;break}},oi=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1},si=function(t,e){return function(){var n,r,i,o,s=this.value;for(e(s)||(s=[s]),n=this.node.options,r=n.length;r--;)i=n[r],o=i._ractive?i._ractive.value:i.value,i.selected=t(s,o)}}(oi,i),ai=function(){var t=(e=this).node,e=e.value;t.checked=e==t._ractive.value},ui=function(t){return function(){var e,n,r,i,o=this.node;if(e=o.checked,o.value=this.element.getAttribute("value"),o.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),e&&!o.checked&&this.element.binding&&(r=this.element.binding.siblings,i=r.length)){for(;i--;){if(n=r[i],!n.element.node)return;if(n.element.node.checked)return t.addViewmodel(n.root.viewmodel),n.handleChange()}t.addViewmodel(n.root.viewmodel),this.root.viewmodel.set(n.keypath,void 0)
}}}(b),ci=function(t){return function(){var e,n;e=this.node,n=this.value,e.checked=t(n)?-1!==n.indexOf(e._ractive.value):n==e._ractive.value}}(i),hi=function(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.className=e},li=function(){var t,e;t=this.node,e=this.value,void 0!==e&&(this.root.nodes[e]=void 0),this.root.nodes[e]=t,t.id=e},fi=function(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)},di=function(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)},pi=function(){var t=(e=this).node,e=e.value;t._ractive.value=e,this.locked||(t.value=void 0==e?"":e)},vi=function(){this.locked||(this.node[this.propertyName]=this.value)},mi=function(t){return function(){var e=(o=this).node,n=o.namespace,r=o.name,i=o.value,o=o.fragment;n?e.setAttributeNS(n,r,(o||i).toString()):t.test(r)?i?e.setAttribute(r,""):e.removeAttribute(r):e.setAttribute(r,(o||i).toString())}}(Kr),gi=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d){return function(){var p,v,m=(y=this).name,g=y.element,y=y.node;"id"===m?v=u:"value"===m?"select"===g.name&&"value"===m?v=g.getAttribute("multiple")?r:n:"textarea"===g.name?v=l:null!=g.getAttribute("contenteditable")?v=h:"input"===g.name&&(p=g.getAttribute("type"),v="file"===p?e:"radio"===p&&g.binding&&"name"===g.binding.name?o:l):this.twoway&&"name"===m?"radio"===y.type?v=i:"checkbox"===y.type&&(v=s):"style"===m&&y.style.setAttribute?v=c:"class"!==m||y.namespaceURI&&y.namespaceURI!==t.html?this.useProperty&&(v=f):v=a,v||(v=d),this.update=v,this.update()}}(_,We,ii,si,ai,ui,ci,hi,li,fi,di,pi,vi,mi),yi=function(t,e,n,r,i,o,s){var a=function(t){this.init(t)};return a.prototype={bubble:t,init:e,rebind:n,render:r,toString:i,unbind:o,update:s},a}(Zr,Xr,ti,ei,ni,ri,gi),bi=function(t){return function(e,n){var r,i,o=[];for(r in n)n.hasOwnProperty(r)&&(i=new t({element:e,name:r,value:n[r],root:e.root}),o.push(o[r]=i));return o}}(yi),wi=function(t){for(var e,n,r=Array.prototype.slice,i=r.call(arguments,1);n=i.shift();)for(e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},Ei=function(t,e,n,r,i){var o=function(t){var n,r,i;return this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],n=this.attribute.interpolator,n.twowayBinding=this,n.keypath&&"${"===n.keypath.substr?(e("Two-way binding does not work with expressions: "+n.keypath),!1):(n.keypath||(n.ref&&n.resolve(n.ref),n.resolver&&n.resolver.forceResolution()),this.keypath=r=n.keypath,void(void 0===this.root.viewmodel.get(r)&&this.getInitialValue&&(i=this.getInitialValue(),void 0!==i&&this.root.viewmodel.set(r,i))))};return o.prototype={handleChange:function(){var e=this;t.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),t.scheduleTask(function(){return e.attribute.locked=!1}),t.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(i(this.root._twowayBindings[e],this),this.keypath=n,t=this.root._twowayBindings[n]||(this.root._twowayBindings[n]=[]),t.push(this))},unbind:function(){}},o.extend=function(t){var e,i=this;return e=function(t){o.call(this,t),this.init&&this.init()},e.prototype=n(i.prototype),r(e.prototype,t),e.extend=o.extend,e},o}(b,F,B,wi,l),xi=function(){this._ractive.binding.handleChange()},_i=function(t,e){var n=t.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var t=this.element.node;t.addEventListener("change",e,!1),this.root.lazy||(t.addEventListener("input",e,!1),t.attachEvent&&t.addEventListener("keyup",e,!1))},unrender:function(){var t=this.element.node;t.removeEventListener("change",e,!1),t.removeEventListener("input",e,!1),t.removeEventListener("keyup",e,!1)},getValue:function(){return this.element.node.innerHTML}});return n}(Ei,xi),ki=function(){var t={};return function(e,n,r){var i=e+n+r;return t[i]||(t[i]=[])}}(),Ai=function(t,e,n,r,i){var o=n.extend({name:"checked",init:function(){this.siblings=r(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",i,!1),t.attachEvent&&t.addEventListener("click",i,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",i,!1),t.removeEventListener("click",i,!1)},handleChange:function(){t.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),t.end()},getValue:function(){return this.element.node.checked},unbind:function(){e(this.siblings,this)}});return o}(b,l,Ei,ki,xi),Ti=function(t,e,n,r){var i=e.extend({name:"name",init:function(){this.siblings=r(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var t=this.element.node;t.name="{{"+this.keypath+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",n,!1),t.attachEvent&&t.addEventListener("click",n,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",n,!1),t.removeEventListener("click",n,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&e.prototype.handleChange.call(this)},rebound:function(t,n,r,i){var o;e.prototype.rebound.call(this,t,n,r,i),(o=this.element.node)&&(o.name="{{"+this.keypath+"}}")},unbind:function(){t(this.siblings,this)}});return i}(l,Ei,xi,ki),Oi=function(t,e,n,r,i){function o(t){return t.isChecked}function s(t){return t.element.getAttribute("value")}var a=n.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var e,n,i;this.checkboxName=!0,this.siblings=r(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),i=this.siblings.noInitialValue,e=this.root.viewmodel.get(this.keypath),n=this.element.getAttribute("value"),i?(this.isChecked=this.element.getAttribute("checked"),this.isChecked&&e.push(n)):this.isChecked=t(e)?-1!==e.indexOf(n):e===n},unbind:function(){e(this.siblings,this)},render:function(){var t=this.element.node;t.name="{{"+this.keypath+"}}",t.checked=this.isChecked,t.addEventListener("change",i,!1),t.attachEvent&&t.addEventListener("click",i,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",i,!1),t.removeEventListener("click",i,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,n.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(o).map(s)}});return a}(i,l,Ei,ki,xi),Ci=function(t,e){var n=t.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",e,!1),t.attachEvent&&t.addEventListener("click",e,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",e,!1),t.removeEventListener("click",e,!1)},getValue:function(){return this.element.node.checked}});return n}(Ei,xi),Si=function(t,e,n){var r=e.extend({getInitialValue:function(){var t,e,n,r,i=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=i.length,t)){for(;e--;)if(i[e].getAttribute("selected")){n=i[e].getAttribute("value"),r=!0;break}if(!r)for(;++e<t;)if(!i[e].getAttribute("disabled")){n=i[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",n,!1)},unrender:function(){this.element.node.removeEventListener("change",n,!1)},setValue:function(e){t.addViewmodel(this.root.viewmodel),this.root.viewmodel.set(this.keypath,e)},getValue:function(){var t,e,n,r,i;for(t=this.element.node.options,n=t.length,e=0;n>e;e+=1)if(r=t[e],t[e].selected)return i=r._ractive?r._ractive.value:r.value},forceUpdate:function(){var e=this,n=this.getValue();void 0!==n&&(this.attribute.locked=!0,t.addViewmodel(this.root.viewmodel),t.scheduleTask(function(){return e.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,n))}});return r}(b,Ei,xi),Ni=function(t){return function(e,n){var r;if(!t(e)||!t(n))return!1;if(e.length!==n.length)return!1;for(r=e.length;r--;)if(e[r]!==n[r])return!1;return!0}}(i),Ri=function(t,e,n,r){var i=n.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",r,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",r,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,r,i,o;for(t=[],e=this.element.node.options,r=e.length,n=0;r>n;n+=1)i=e[n],i.selected&&(o=i._ractive?i._ractive.value:i.value,t.push(o));return t},handleChange:function(){var t,r,i;return t=this.attribute,r=t.value,i=this.getValue(),void 0!==r&&e(i,r)||n.prototype.handleChange.call(this),this},forceUpdate:function(){var e=this,n=this.getValue();void 0!==n&&(this.attribute.locked=!0,t.addViewmodel(this.root.viewmodel),t.scheduleTask(function(){return e.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,n))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}});return i}(b,Ni,Si,xi),Ii=function(t,e){var n=t.extend({render:function(){this.element.node.addEventListener("change",e,!1)},unrender:function(){this.element.node.removeEventListener("change",e,!1)},getValue:function(){return this.element.node.files}});return n}(Ei,xi),Li=function(t,e){function n(){var t;e.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,o),this.value=void 0==t?"":t}var r,i,o;return o={evaluateWrapped:!0},i=t.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t=this.element.node;t.addEventListener("change",e,!1),this.root.lazy||(t.addEventListener("input",e,!1),t.attachEvent&&t.addEventListener("keyup",e,!1)),t.addEventListener("blur",n,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",e,!1),t.removeEventListener("input",e,!1),t.removeEventListener("keyup",e,!1),t.removeEventListener("blur",n,!1)}}),r=i}(Ei,xi),Pi=function(t){return t.extend({getInitialValue:function(){return void 0},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}})}(Li),Fi=function(t,e,n,r,i,o,s,a,u,c,h){function l(t){return t&&t.isBindable}var f;return f=function(f){var d,p,v,m,g=f.attributes;return f.binding&&(f.binding.teardown(),f.binding=null),f.getAttribute("contenteditable")&&l(g.value)?p=e:"input"===f.name?(d=f.getAttribute("type"),"radio"===d||"checkbox"===d?(v=l(g.name),m=l(g.checked),v&&m&&t.error({message:"badRadioInputBinding"}),v?p="radio"===d?r:i:m&&(p="radio"===d?n:o)):"file"===d&&l(g.value)?p=u:l(g.value)&&(p="number"===d||"range"===d?c:h)):"select"===f.name&&l(g.value)?p=f.getAttribute("multiple")?a:s:"textarea"===f.name&&l(g.value)&&(p=h),p?new p(f):void 0}}(Qn,_i,Ai,Ti,Oi,Ci,Si,Ri,Ii,Pi,Li),Mi=function(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()},ji=function(t){return function(e){t(this.root,this.getAction(),{event:e})}}(h),Vi=function(){return this.action.toString().trim()},Di=function(t,e,n,r,i,o,s){function a(t){var e,n,r;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.args.map(function(n){var r,i,o;if(!n)return void 0;if(n.indexRef)return n.value;if(n.eventObject){if(r=t,i=n.refinements.length)for(o=0;i>o;o+=1)r=r[n.refinements[o]]}else r=e.get(n.keypath);return r}),r=this.fn.apply(null,n),e[this.method].apply(e,r)}function u(t){o(this.root,this.getAction(),{event:t,args:this.params})}function c(t){var e=this.dynamicParams.getValue(f);"string"==typeof e&&(e=e.substr(1,e.length-2)),o(this.root,this.getAction(),{event:t,args:e})}var h,l,f={args:!0},d=/^event(?:\.(.+))?/;return i.push(function(){l=i.Fragment}),h=function(i,o,h){var f,p,v,m,g,y=this;y.element=i,y.root=i.root,y.name=o,-1!==o.indexOf("*")&&(s.error({debug:this.root.debug,message:"noElementProxyEventWildcards",args:{element:i.tagName,event:o}}),this.invalid=!0),h.m?(y.method=h.m,y.args=p=[],y.unresolved=[],y.refs=h.a.r,y.fn=e(h.a.s,y.refs.length),g=i.parentFragment,v=g.indexRefs,m=y.root,h.a.r.forEach(function(e,i){var o,s,a,u;return v&&void 0!==(o=v[e])?void(p[i]={indexRef:e,value:o}):(a=d.exec(e))?void(p[i]={eventObject:!0,refinements:a[1]?a[1].split("."):[]}):(s=n(m,e,g))?void(p[i]={keypath:s}):(p[i]=null,u=new r(m,e,g,function(e){y.resolve(i,e),t(y.unresolved,u)}),void y.unresolved.push(u))}),this.fire=a):(f=h.n||h,"string"!=typeof f&&(f=new l({template:f,root:this.root,owner:this})),this.action=f,h.d?(this.dynamicParams=new l({template:h.d,root:this.root,owner:this.element}),this.fire=c):h.a&&(this.params=h.a,this.fire=u))}}(l,Yn,g,Gn,n,h,Qn),Ui=function(t){var e,n;e=this._ractive,n=e.events[t.type],n.fire({node:this,original:t,index:e.index,keypath:e.keypath,context:e.root.get(e.keypath)})},Wi=function(t,e,n){function r(t){return o[t]||(o[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath,e.context=n.root.get(n.keypath),n.events[t].fire(e)}),o[t]}var i,o={};return i=function(){var i,o=this.name;this.invalid||((i=t.registries.events.find(this.root,o))?this.custom=i(this.node,r(o)):("on"+o in this.node||window&&"on"+o in window||n.error({debug:this.root.debug,message:"missingPlugin",args:{plugin:"event",name:o}}),this.node.addEventListener(o,e,!1)),this.hasListener=!0)}}(ze,Ui,Qn),Bi=function(t){return function(e,n,r,i){return this.method?void this.args.forEach(function(o){o.indexRef&&o.indexRef===e&&(o.value=n),o.keypath&&(i=t(o.keypath,r,i))&&(o.keypath=i)}):("string"!=typeof this.action&&this.action.rebind(e,n,r,i),void(this.dynamicParams&&this.dynamicParams.rebind(e,n,r,i)))}}(Kn),$i=function(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()},zi=function(t,e){this.args[t]={keypath:e}},qi=function(){function t(t){t.teardown()}var e;return e=function(){return this.method?void this.unresolved.forEach(t):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}}(),Hi=function(t){return function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,t,!1),this.hasListener=!1}}(Ui),Gi=function(t,e,n,r,i,o,s,a,u,c){var h=function(t,e,n){this.init(t,e,n)};return h.prototype={bubble:t,fire:e,getAction:n,init:r,listen:i,rebind:o,render:s,resolve:a,unbind:u,unrender:c},h}(Mi,ji,Vi,Di,Wi,Bi,$i,zi,qi,Hi),Zi=function(t){return function(e,n){var r,i,o,s,a=[];for(i in n)if(n.hasOwnProperty(i))for(o=i.split("-"),r=o.length;r--;)s=new t(e,o[r],n[i]),a.push(s);return a}}(Gi),Ki=function(t,e,n){var r,i,o;return e.push(function(){r=e.Fragment}),i={args:!0},o=function(e,o){var s,a,u,c=this;c.element=e,c.root=s=e.root,a=o.n||o,"string"!=typeof a&&(u=new r({template:a,root:s,owner:e}),a=u.toString(),u.unbind()),o.a?c.params=o.a:o.d&&(c.fragment=new r({template:o.d,root:s,owner:e}),c.params=c.fragment.getValue(i),c.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,c.params=this.getValue(i),c.ready&&c.update()}),c.fn=n.registries.decorators.find(s,a),c.fn||t.error({debug:s.debug,message:"missingPlugin",args:{plugin:"decorator",name:a}})},o.prototype={init:function(){var t,e,n,r=this;if(t=r.element.node,r.params?(n=[t].concat(r.params),e=r.fn.apply(r.root,n)):e=r.fn.call(r.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");r.actual=e,r.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e,n,r){this.fragment&&this.fragment.rebind(t,e,n,r)},teardown:function(t){this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}},o}(Qn,n,ze),Qi=function(t){function e(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}var n;return n=function(n){var r,i,o,s,a;r=n.node,r&&(s=t(r.options),i=n.getAttribute("value"),o=n.getAttribute("multiple"),void 0!==i?(s.forEach(function(t){var n,r;n=t._ractive?t._ractive.value:t.value,r=o?e(i,n):i==n,r&&(a=!0),t.selected=r}),a||(s[0]&&(s[0].selected=!0),n.binding&&n.binding.forceUpdate())):n.binding&&n.binding.forceUpdate())}}(Nr),Yi=function(t,e){return function(){var n=this;this.dirty||(this.dirty=!0,t.scheduleTask(function(){e(n),n.dirty=!1})),this.parentFragment.bubble()}}(b,Qi),Ji=function(t){do if("select"===t.name)return t;while(t=t.parent)},Xi=function(t){return function(e,n){e.select=t(e.parent),e.select&&(e.select.options.push(e),n.a||(n.a={}),n.a.value||n.a.hasOwnProperty("disabled")||(n.a.value=n.f),"selected"in n.a&&void 0!==e.select.getAttribute("value")&&delete n.a.selected)}}(Ji),to=function(t,e,n,r,i,o,s,a,u){var c;return u.push(function(){c=u.Fragment}),function(u){var h,l,f,d,p;this.type=t.ELEMENT,h=this.parentFragment=u.parentFragment,l=this.template=u.template,this.parent=u.pElement||h.pElement,this.root=f=h.root,this.index=u.index,this.name=e(l.e),"option"===this.name&&a(this,l),"select"===this.name&&(this.options=[],this.bubble=s),this.attributes=n(this,l.a),l.f&&(this.fragment=new c({template:l.f,root:f,owner:this,pElement:this})),f.twoway&&(d=r(this,l.a))&&(this.binding=d,p=this.root._twowayBindings[d.keypath]||(this.root._twowayBindings[d.keypath]=[]),p.push(d)),l.v&&(this.eventHandlers=i(this,l.v)),l.o&&(this.decorator=new o(this,l.o)),this.intro=l.t0||l.t1,this.outro=l.t0||l.t2}}(W,Gr,bi,Fi,Zi,Ki,Yi,Xi,n),eo=function(t){return function(e,n){return e===n||t(e,n)}}(Zn),no=function(t,e){return function(n,r,i,o){var s=n[r];s&&!t(s,o)&&t(s,i)&&(n[r]=e(s,i,o))}}(eo,Kn),ro=function(t){return function(e,n,r,i){function o(t){t.rebind(e,n,r,i)}var s,a,u,c;if(this.attributes&&this.attributes.forEach(o),this.eventHandlers&&this.eventHandlers.forEach(o),this.decorator&&o(this.decorator),this.fragment&&o(this.fragment),u=this.liveQueries)for(c=this.root,s=u.length;s--;)u[s]._makeDirty();this.node&&(a=this.node._ractive)&&(t(a,"keypath",r,i),void 0!=e&&(a.index[e]=n))}}(no),io=function(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),r=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==r&&t.node.setAttribute("height",r),t.node.removeEventListener("load",e,!1)},!1)},oo=function(t,e,n){var r,i={};return n.push(function(){r=n.Fragment}),function(n,o,s){var a,u,c,h=this;return h.element=n,h.root=a=n.root,h.isIntro=s,u=o.n||o,"string"!=typeof u&&(c=new r({template:u,root:a,owner:n}),u=c.toString(),c.unbind()),h.name=u,o.a?h.params=o.a:o.d&&(c=new r({template:o.d,root:a,owner:n}),h.params=c.getValue(i),c.unbind()),h._fn=e.registries.transitions.find(a,u),h._fn?void 0:void t.error({debug:a.debug,message:"missingPlugin",args:{plugin:"transition",name:u}})}}(Qn,ze,n),so=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})},ao=function(t,e,n,r){var i,o,s;return t?(o={},s=n("div").style,i=function(t){var n,i,a;if(t=r(t),!o[t])if(void 0!==s[t])o[t]=t;else for(a=t.charAt(0).toUpperCase()+t.substring(1),n=e.length;n--;)if(i=e[n],void 0!==s[i+a]){o[t]=i+a;break}return o[t]}):i=null,i}(A,R,k,so),uo=function(t,e,n,r){var i,o;return e?(o=window.getComputedStyle||t.getComputedStyle,i=function(t){var e,i,s,a,u;if(e=o(this.node),"string"==typeof t)return u=e[r(t)],"0px"===u&&(u=0),u;if(!n(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(i={},s=t.length;s--;)a=t[s],u=e[r(a)],"0px"===u&&(u=0),i[a]=u;return i}):i=null,i}(ye,A,i,ao),co=function(t){return function(e,n){var r;if("string"==typeof e)this.node.style[t(e)]=n;else for(r in e)e.hasOwnProperty(r)&&(this.node.style[t(r)]=e[r]);return this}}(ao),ho=function(t,e,n){function r(t){return t}var i,o=function(i){var o;this.duration=i.duration,this.step=i.step,this.complete=i.complete,"string"==typeof i.easing?(o=i.root.easing[i.easing],o||(t('Missing easing function ("'+i.easing+'"). You may need to download a plugin from [TODO]'),o=r)):o="function"==typeof i.easing?i.easing:r,this.easing=o,this.start=e(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return o.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},i=o}(F,L,P),lo=function(t){var e=new RegExp("^-(?:"+t.join("|")+")-");return function(t){return t.replace(e,"")}}(R),fo=function(t){var e=new RegExp("^(?:"+t.join("|")+")([A-Z])");return function(t){var n;return t?(e.test(t)&&(t="-"+t),n=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""}}(R),po=function(t,e,n,r,i,o,s,a,u){var c,h,l,f,d,p,v,m,g={},y={};return t?(h=n("div").style,function(){void 0!==h.transition?(l="transition",f="transitionend",d=!0):void 0!==h.webkitTransition?(l="webkitTransition",f="webkitTransitionEnd",d=!0):d=!1}(),l&&(p=l+"Duration",v=l+"Property",m=l+"TimingFunction"),c=function(t,n,c,h,l){setTimeout(function(){var b,w,E,x,_;x=function(){w&&E&&(t.root.fire(t.name+":end",t.node,t.isIntro),l())},b=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[v]=h.map(s).map(u).join(","),t.node.style[m]=u(c.easing||"linear"),t.node.style[p]=c.duration/1e3+"s",_=function(e){var n;n=h.indexOf(r(a(e.propertyName))),-1!==n&&h.splice(n,1),h.length||(t.node.removeEventListener(f,_,!1),E=!0,x())},t.node.addEventListener(f,_,!1),setTimeout(function(){for(var a,u,l,p,v,m=h.length,k=[];m--;)p=h[m],a=b+p,d&&!y[a]&&(t.node.style[s(p)]=n[p],g[a]||(u=t.getStyle(p),g[a]=t.getStyle(p)!=n[p],y[a]=!g[a],y[a]&&(t.node.style[s(p)]=u))),(!d||y[a])&&(void 0===u&&(u=t.getStyle(p)),l=h.indexOf(p),-1===l?e("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):h.splice(l,1),v=/[^\d]*$/.exec(n[p])[0],k.push({name:s(p),interpolator:i(parseFloat(u),parseFloat(n[p])),suffix:v}));k.length?new o({root:t.root,duration:c.duration,easing:r(c.easing||""),step:function(e){var n,r;for(r=k.length;r--;)n=k[r],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){w=!0,x()}}):w=!0,h.length||(t.node.removeEventListener(f,_,!1),E=!0,x())},0)},c.delay||0)}):c=null,c}(A,F,k,so,qe,ho,ao,lo,fo),vo=function(t){function e(){u.hidden=document[i]}function n(){u.hidden=!0}function r(){u.hidden=!1}var i,o,s,a,u;if("undefined"!=typeof document){if(i="hidden",u={},i in document)s="";else for(a=t.length;a--;)o=t[a],i=o+"Hidden",i in document&&(s=o);void 0!==s?(document.addEventListener(s+"visibilitychange",e),e()):("onfocusout"in document?(document.addEventListener("focusout",n),document.addEventListener("focusin",r)):(window.addEventListener("pagehide",n),window.addEventListener("blur",n),window.addEventListener("pageshow",r),window.addEventListener("focus",r)),u.hidden=!1)}return u}(R),mo=function(t,e,n,r,i,o,s){var a,u,c;return e?(u=window.getComputedStyle||t.getComputedStyle,a=function(t,e,a,h){var l,f=this;if(s.hidden)return this.setStyle(t,e),c||(c=r.resolve());"string"==typeof t?(l={},l[t]=e):(l=t,h=a,a=e),a||(n('The "'+f.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),a=f,h=f.complete);var d=new r(function(t){var e,n,r,s,c,h,d;if(!a.duration)return f.setStyle(l),void t();for(e=Object.keys(l),n=[],r=u(f.node),c={},h=e.length;h--;)d=e[h],s=r[i(d)],"0px"===s&&(s=0),s!=l[d]&&(n.push(d),f.node.style[i(d)]=s);return n.length?void o(f,l,a,n,t):void t()});return h&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),d.then(h)),d}):a=null,a}(ye,A,F,f,ao,po,vo),go=function(t,e){var n;for(n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n]);return t},yo=function(t){return function(e,n){return"number"==typeof e?e={duration:e}:"string"==typeof e?e="slow"===e?{duration:600}:"fast"===e?{duration:200}:{duration:400}:e||(e={}),t(e,n)}}(go),bo=function(){function t(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}var e;return e=function(){var e,n,r=this;return e=r.node=r.element.node,n=e.getAttribute("style"),r.complete=function(i){!i&&r.isIntro&&t(e,n),e._ractive.transition=null,r._manager.remove(r)},r._fn?void r._fn.apply(r.root,[r].concat(r.params)):void r.complete()}}(),wo=function(t,e,n,r,i,o,s){var a,u;return s.push(function(){a=s.Fragment}),u=function(t,e,n){this.init(t,e,n)},u.prototype={init:t,start:o,getStyle:e,setStyle:n,animateStyle:r,processParams:i},u}(oo,uo,co,mo,yo,bo,n),Eo=function(t,e,n,r,i,o,s,a,u,c,h){function l(e){var n,r,i;return n=(r=e.getAttribute("xmlns"))?r:"svg"===e.name?t.svg:(i=e.parent)?"foreignObject"===i.name?t.html:i.node.namespaceURI:e.root.el.namespaceURI}function f(t){var n,r,i;if(t.select&&(r=t.select.getAttribute("value"),void 0!==r))if(n=t.getAttribute("value"),t.select.node.multiple&&e(r)){for(i=r.length;i--;)if(n==r[i]){t.node.selected=!0;break}}else t.node.selected=n==r}function d(t){var e,n,r,i,o;e=t.root;do for(n=e._liveQueries,r=n.length;r--;)i=n[r],o=n["_"+i],o._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(o);while(e=e._parent)}var p,v,m;return v=function(){var t=this.node,e=this.fragment.toString(!1);if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},m=function(){this.node.type&&"text/javascript"!==this.node.type||n("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)},p=function(){var t,e,n=this,p=this.root;if(t=l(this),e=this.node=i(this.name,t),p.constructor.css&&this.parentFragment.getNode()===p.el&&this.node.setAttribute("data-rvcguid",p.constructor._guid),o(this.node,"_ractive",{value:{proxy:this,keypath:u(this.parentFragment),index:this.parentFragment.indexRefs,events:r(null),root:p}}),this.attributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=m,this.node.text=this.fragment.toString(!1),this.fragment.unrender=s):"style"===this.name?(this.bubble=v,this.bubble(),this.fragment.unrender=s):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=s:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"img"===this.name&&c(this),this.decorator&&this.decorator.fn&&a.scheduleTask(function(){n.decorator.init()}),p.transitionsEnabled&&this.intro){var g=new h(this,this.intro,!0);a.registerTransition(g),a.scheduleTask(function(){return g.start()})}return"option"===this.name&&f(this),this.node.autofocus&&a.scheduleTask(function(){return n.node.focus()}),d(this),this.node}}(_,i,F,B,k,T,We,b,p,io,wo),xo=function(t,e,n){function r(t){var n,r,i;if(n=t.getAttribute("value"),void 0===n||!t.select)return!1;if(r=t.select.getAttribute("value"),r==n)return!0;if(t.select.getAttribute("multiple")&&e(r))for(i=r.length;i--;)if(r[i]==n)return!0}function i(t){var e,n,r,i;return e=t.attributes,n=e.type,r=e.value,i=e.name,n&&"radio"===n.value&&r&&i.interpolator&&r.value===i.interpolator.value?!0:void 0}function o(t){var e=t.toString();return e?" "+e:""}var s;return s=function(){var e,s;return e="<"+(this.template.y?"!DOCTYPE":this.template.e),e+=this.attributes.map(o).join(""),"option"===this.name&&r(this)&&(e+=" selected"),"input"===this.name&&i(this)&&(e+=" checked"),e+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?e+=n(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(e+=this.getAttribute("value")),this.fragment&&(s="script"!==this.name&&"style"!==this.name,e+=this.fragment.toString(s)),t.test(this.template.e)||(e+="</"+this.template.e+">"),e}}(xe,i,Wn),_o=function(t){return function(e){e.select&&t(e.select.options,e)}}(l),ko=function(t){function e(t){t.unbind()}var n;return n=function(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(e),"option"===this.name&&t(this),this.attributes.forEach(e)}}(_o),Ao=function(t,e){function n(t){var e,n,r;for(r=t.liveQueries.length;r--;)e=t.liveQueries[r],n=e.selector,e._remove(t.node)}var r;return r=function(r){var i,o;if("option"===this.name?this.detach():r&&t.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(i=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,o=this.root._twowayBindings[i.keypath],o.splice(o.indexOf(i),1)),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.unrender()}),this.decorator&&this.decorator.teardown(),this.root.transitionsEnabled&&this.outro){var s=new e(this,this.outro,!1);t.registerTransition(s),t.scheduleTask(function(){return s.start()})}this.liveQueries&&n(this),this.node.id&&delete this.root.nodes[this.node.id]}}(b,wo),To=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p){var v=function(t){this.init(t)};return v.prototype={bubble:t,detach:e,find:n,findAll:r,findAllComponents:i,findComponent:o,findNextNode:s,firstNode:a,getAttribute:u,init:c,rebind:h,render:l,toString:f,unbind:d,unrender:p},v}(Vr,Dr,Ur,Wr,Br,$r,zr,qr,Hr,to,ro,Eo,xo,ko,Ao),Oo=function(){function t(t,e){var n=r.exec(e)[0];return null===t||n.length<t.length?n:t}var e,n=/^\s*$/,r=/^\s*/;return e=function(e){var r,i,o,s;return r=e.split("\n"),i=r[0],void 0!==i&&n.test(i)&&r.shift(),o=r[r.length-1],void 0!==o&&n.test(o)&&r.pop(),s=r.reduce(t,null),s&&(e=r.map(function(t){return t.replace(s,"")}).join("\n")),e}}(),Co=function(t,e,n,r){function i(r,i){var o=e.registries.partials,s=o.findInstance(r,i);if(s){var a,u=s.partials[i];if("function"==typeof u&&(a=u.bind(s),a.isOwner=s.partials.hasOwnProperty(i),u=a(s.data,n)),!u)return void t.warn({debug:r.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:i}});if(!n.isParsed(u)){var c=n.parse(u,n.getParseOptions(s));c.p&&t.warn({debug:r.debug,message:"noNestedPartials",args:{rname:i}});var h=a?s:o.findOwner(s,i);h.partials[i]=u=c.t}return a&&(u._fn=a),u.v?u.t:u}}var o;return o=function(e,o){var s;if(s=i(e,o))return s;if(s=n.fromId(o,{noThrow:!0})){s=r(s);var a=n.parse(s,n.getParseOptions(e));return e.partials[o]=a.t}return t.error({debug:e.debug,message:"noTemplateForPartial",args:{name:o}}),[]}}(Qn,ze,je,Oo),So=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},No=function(t,e,n,r,i,o,s,a){var u,c;return r.push(function(){c=r.Fragment}),u=function(e){var n=this.parentFragment=e.parentFragment;this.type=t.PARTIAL,this.name=e.template.r,this.index=e.index,this.root=n.root,o.init(this,e),this.update()},u.prototype={bubble:function(){this.parentFragment.bubble()},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){return this.update(),this.rendered=!0,this.fragment.render()},unrender:function(t){this.rendered&&(this.fragment.unrender(t),this.rendered=!1)},rebind:function(t,e,n,r){return this.fragment.rebind(t,e,n,r)},unbind:function(){this.fragment&&this.fragment.unbind()},toString:function(e){var r,i,o,s;return r=this.fragment.toString(e),i=this.parentFragment.items[this.index-1],i&&i.type===t.TEXT?(o=i.text.split("\n").pop(),(s=/^\s+$/.exec(o))?n(r,s[0]):r):r
},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},getValue:function(){return this.fragment.getValue()},resolve:o.resolve,setValue:function(t){this.value!==t&&(this.fragment&&this.rendered&&this.fragment.unrender(!0),this.fragment=null,this.value=t,this.rendered?i.addView(this):(this.update(),this.bubble()))},update:function(){var t,n,r,i;this.fragment||(t=this.name&&(s.registries.partials.findInstance(this.root,this.name)||a.fromId(this.name,{noThrow:!0}))?e(this.root,this.name):this.value?e(this.root,this.value):[],this.fragment=new c({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.rendered&&(r=this.parentFragment.getNode(),n=this.fragment.render(),i=this.parentFragment.findNextNode(this),r.insertBefore(n,i)))}},u}(W,Co,So,n,b,sr,ze,je),Ro=function(t,e,n){var r;return n.push(function(){r=n.Ractive}),function i(n,r){var o,s=t.registries.components.findInstance(n,r);if(s&&(o=s.components[r],!o._parent)){var a=o.bind(s);if(a.isOwner=s.components.hasOwnProperty(r),o=a(s.data),!o)return void e.warn({debug:n.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:r}});"string"==typeof o&&(o=i(n,o)),o._fn=a,s.components[r]=o}return o}}(ze,Qn,n),Io=function(){return this.instance.fragment.detach()},Lo=function(t){return this.instance.fragment.find(t)},Po=function(t,e){return this.instance.fragment.findAll(t,e)},Fo=function(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)},Mo=function(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance},jo=function(){return this.parentFragment.findNextNode(this)},Vo=function(){return this.rendered?this.instance.fragment.firstNode():null},Do=function(t,e){var n,r;return e.push(function(){n=e.Fragment}),r=function(t,e,r){this.parentFragment=t.parentFragment,this.component=t,this.key=e,this.fragment=new n({template:r,root:t.root,owner:this}),this.value=this.fragment.getValue()},r.prototype={bubble:function(){this.dirty||(this.dirty=!0,t.addView(this))},update:function(){var e=this.fragment.getValue();this.component.instance.viewmodel.set(this.key,e),t.addViewmodel(this.component.instance.viewmodel),this.value=e,this.dirty=!1},rebind:function(t,e,n,r){this.fragment.rebind(t,e,n,r)},unbind:function(){this.fragment.unbind()}},r}(b,n),Uo=function(t,e){var n=function(n,r,i,o){var s=this;this.root=n.root,this.parentFragment=n.parentFragment,this.ready=!1,this.hash=null,this.resolver=new t(this,i,function(t){s.binding||(s.binding=n.bindings[s.hash])?(n.bindings[s.hash]=null,s.binding.rebind(t),s.hash=t+"="+r,n.bindings[s.hash]):s.ready?e(n,n.root,t,r):o.push({childKeypath:r,parentKeypath:t}),s.value=n.root.viewmodel.get(t)})};return n.prototype={rebind:function(t,e,n,r){this.resolver.rebind(t,e,n,r)},unbind:function(){this.resolver.unbind()}},n}(nr,m),Wo=function(t,e,n,r,i){function o(o,s,a,u){var c,h,l,f,d,p;if(l=o.root,f=o.parentFragment,"string"==typeof a)return h=e(a),h?h.value:a;if(null===a)return!0;if(1===a.length&&a[0].t===t.INTERPOLATOR){if(a[0].r)return f.indexRefs&&void 0!==f.indexRefs[p=a[0].r]?(o.indexRefBindings[p]=s,f.indexRefs[p]):(d=n(l,a[0].r,f)||a[0].r,u.push({childKeypath:s,parentKeypath:d}),l.viewmodel.get(d));if(a[0].rx)return c=new i(o,s,a[0].rx,u),o.complexParameters.push(c),c.ready=!0,c.value}return c=new r(o,s,a),o.complexParameters.push(c),c.value}var s;return s=function(t,e,n,r){var i,s,a={};t.complexParameters=[];for(i in n)n.hasOwnProperty(i)&&(s=o(t,i,n[i],r),(void 0!==s||void 0===e[i])&&(a[i]=s));return a}}(W,Ce,g,Do,Uo),Bo=function(t){return function(e,n,r,i){var o,s,a,u;return s=e.parentFragment,u=e.root,a={content:i||[]},n.defaults.el&&t.warn({debug:u.debug,message:"defaultElSpecified",args:{name:e.name}}),o=new n({el:null,append:!0,data:r,partials:a,magic:u.magic||n.defaults.magic,modifyArrays:u.modifyArrays,_parent:u,_component:e,adapt:u.adapt,"yield":{template:i,instance:u}})}}(Qn),$o=function(t){return function(e,n){n.forEach(function(n){var r,i;t(e,e.root,n.parentKeypath,n.childKeypath),r=e.instance.viewmodel.get(n.childKeypath),i=e.root.viewmodel.get(n.parentKeypath),void 0!==r&&void 0===i&&e.root.viewmodel.set(n.parentKeypath,r)})}}(m),zo=function(t,e,n){function r(t,r,i,o){"string"!=typeof o&&n.error({debug:r.debug,message:"noComponentEventArguments"}),t.on(i,function(){var t,n;return arguments.length&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),e(r,o,{event:t,args:n}),!1})}var i,o;return t.push(function(){o=t.Fragment}),i=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&r(t.instance,t.root,n,e[n])}}(n,h,Qn),qo=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e._parent},Ho=function(t,e,n,r,i,o,s){return function(a,u){var c,h,l,f;if(c=this.parentFragment=a.parentFragment,h=c.root,this.root=h,this.type=t.COMPONENT,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.bindings=[],this.yielder=null,!u)throw new Error('Component "'+this.name+'" not found');f=[],l=n(this,u.defaults.data||{},a.template.a,f),r(this,u,l,a.template.f),i(this,f),o(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&e('The "intro", "outro" and "decorator" directives have no effect on components'),s(this)}}(W,F,Wo,Bo,$o,zo,qo),Go=function(t,e){return function(n,r,i,o){function s(t){t.rebind(n,r,i,o)}var a,u,c=this.instance,h=c._parent;this.bindings.forEach(function(t){var n;t.root===h&&(n=e(t.keypath,i,o))&&t.rebind(n)}),this.complexParameters.forEach(s),this.yielder&&s(this.yielder),(a=this.indexRefBindings[n])&&(t.addViewmodel(c.viewmodel),c.viewmodel.set(a,r)),(u=this.root._liveComponentQueries["_"+this.name])&&u._makeDirty()}}(b,Kn),Zo=function(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()},Ko=function(){return this.instance.fragment.toString()},Qo=function(){function t(t){t.unbind()}function e(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e._parent)}var n;return n=function(){this.complexParameters.forEach(t),this.bindings.forEach(t),e(this),this.instance.fragment.unbind()}}(),Yo=function(t){return function(e){t(this.instance,"teardown"),this.shouldDestroy=e,this.instance.unrender()}}(h),Jo=function(t,e,n,r,i,o,s,a,u,c,h,l,f){var d=function(t,e){this.init(t,e)};return d.prototype={detach:t,find:e,findAll:n,findAllComponents:r,findComponent:i,findNextNode:o,firstNode:s,init:a,rebind:u,render:c,toString:h,unbind:l,unrender:f},d}(Io,Lo,Po,Fo,Mo,jo,Vo,Ho,Go,Zo,Ko,Qo,Yo),Xo=function(t,e){var n=function(e){this.type=t.COMMENT,this.value=e.template.c};return n.prototype={detach:e,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}},n}(W,$n),ts=function(t){var e;t.push(function(){e=t.Fragment});var n=function(t){var n,r;if(n=t.parentFragment.root,this.component=r=n.component,this.surrogateParent=t.parentFragment,this.parentFragment=r.parentFragment,r.yielder)throw new Error("A component template can only have one {{yield}} declaration at a time");this.fragment=new e({owner:this,root:n.yield.instance,template:n.yield.template}),r.yielder=this};return n.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.surrogateParent.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),this.component.yielder=void 0},rebind:function(t,e,n,r){this.fragment.rebind(t,e,n,r)},toString:function(){return this.fragment.toString()}},n}(n),es=function(t,e,n,r,i,o,s,a,u,c,h){return function(l){if("string"==typeof l.template)return new e(l);switch(l.template.t){case t.INTERPOLATOR:return"yield"===l.template.r?new h(l):new n(l);case t.SECTION:return new r(l);case t.TRIPLE:return new i(l);case t.ELEMENT:var f;return(f=a(l.parentFragment.root,l.template.e))?new u(l,f):new o(l);case t.PARTIAL:return new s(l);case t.COMMENT:return new c(l);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(W,zn,ar,kr,jr,To,No,Ro,Jo,Xo,ts),ns=function(t,e,n){return function(r){var i,o,s,a=this;if(this.owner=r.owner,i=this.parent=this.owner.parentFragment,this.root=r.root,this.pElement=r.pElement,this.context=r.context,this.owner.type===t.SECTION&&(this.index=r.index),i&&(o=i.indexRefs)){this.indexRefs=e(null);for(s in o)this.indexRefs[s]=o[s]}this.priority=i?i.priority+1:1,r.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[r.indexRef]=r.index),"string"==typeof r.template?r.template=[r.template]:r.template||(r.template=[]),this.items=r.template.map(function(t,e){return n({parentFragment:a,pElement:r.pElement,template:t,index:e})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}}(W,B,es),rs=function(t){return function(e,n,r,i){t(this,"context",r,i),this.indexRefs&&void 0!==this.indexRefs[e]&&(this.indexRefs[e]=n),this.items.forEach(function(t){t.rebind&&t.rebind(e,n,r,i)})}}(no),is=function(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t},os=function(t){return this.items?this.items.map(function(e){return e.toString(t)}).join(""):""},ss=function(){function t(t){t.unbind&&t.unbind()}var e;return e=function(){this.bound&&(this.items.forEach(t),this.bound=!1)}}(),as=function(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1},us=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,m){var g=function(t){this.init(t)};return g.prototype={bubble:t,detach:e,find:n,findAll:r,findAllComponents:i,findComponent:o,findNextNode:s,firstNode:a,getNode:u,getValue:c,init:h,rebind:l,render:f,toString:d,unbind:p,unrender:v},m.Fragment=g,g}(Rn,In,Ln,Pn,Fn,Mn,jn,Vn,Dn,Un,ns,rs,is,os,ss,as,n),cs=function(t,e,n,r){var i=["template","partials","components","decorators","events"];return function(o,s){var a,u,c,h,l;if("function"!=typeof o||s?o=o||{}:(s=o,o={}),"object"!=typeof o)throw new Error("The reset method takes either no arguments, or an object containing new data");for((u=this.viewmodel.wrapped[""])&&u.reset?u.reset(o)===!1&&(this.data=o):this.data=o,c=r.reset(this),h=c.length;h--;)if(i.indexOf(c[h])>-1){l=!0;break}if(l){var f;this.viewmodel.mark(""),(f=this.component)&&(f.shouldDestroy=!0),this.unrender(),f&&(f.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new n({template:this.template,root:this,owner:this})),a=this.render(this.el,this.anchor)}else a=e.start(this,!0),this.viewmodel.mark(""),e.end();return t(this,"reset",{args:[o]}),s&&a.then(s),a}}(h,b,us,ze),hs=function(t,e){return function(n){var r,i;t.template.init(null,this,{template:n}),r=this.transitionsEnabled,this.transitionsEnabled=!1,(i=this.component)&&(i.shouldDestroy=!0),this.unrender(),i&&(i.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new e({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=r}}(ze,us),ls=function(t){return t("reverse")}(Tn),fs=function(t,e,n,r){var i=/\*/;return function(o,s,a){var u,c,h=this;if(c=t.start(this,!0),e(o)){u=o,a=s;for(o in u)u.hasOwnProperty(o)&&(s=u[o],o=n(o),this.viewmodel.set(o,s))}else o=n(o),i.test(o)?r(this,o).forEach(function(t){h.viewmodel.set(t,s)}):this.viewmodel.set(o,s);return t.end(),a&&c.then(a.bind(this)),c}}(b,o,N,vn),ds=function(t){return t("shift")}(Tn),ps=function(t){return t("sort")}(Tn),vs=function(t){return t("splice")}(Tn),ms=function(t){return function(e,n){return t(this,e,void 0===n?-1:-n)}}(C),gs=function(t,e,n){return function(r){var i;return t(this,"teardown"),this.fragment.unbind(),this.viewmodel.teardown(),this.rendered&&this.el.__ractive_instances__&&e(this.el.__ractive_instances__,this),this.shouldDestroy=!0,i=this.rendered?this.unrender():n.resolve(),r&&i.then(r.bind(this)),i}}(h,l,f),ys=function(t){return function(e,n){var r;return"string"!=typeof e&&t.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:e}}),r=this.get(e),this.set(e,!r,n)}}(Qn),bs=function(){return this.fragment.toString(!0)},ws=function(t,e,n,r,i){return function(){var o,s,a=this;if(!this.rendered)return r.warn({debug:this.debug,message:"ractive.unrender() was called on a Ractive instance that was not rendered"}),i.resolve();for(o=e.start(this,!0),s=!this.component||this.component.shouldDestroy||this.shouldDestroy,this.constructor.css&&o.then(function(){n.remove(a.constructor)});this._animations[0];)this._animations[0].stop();return this.fragment.unrender(s),this.rendered=!1,t(this.el.__ractive_instances__,this),e.end(),o}}(l,b,Sn,Qn,f),Es=function(t){return t("unshift")}(Tn),xs=function(t,e){return function(n,r){var i;return"function"==typeof n?(r=n,n=""):n=n||"",i=e.start(this,!0),this.viewmodel.mark(n),e.end(),t(this,"update",{args:[n]}),r&&i.then(r.bind(this)),i}}(h,b),_s=function(t,e){function n(r,i,o,s){var a,u,c,h,l,f,d=[];if(a=r._twowayBindings[i],a&&(c=a.length))for(;c--;)h=a[c],(!h.radioName||h.element.node.checked)&&(h.checkboxName?d[h.keypath]||h.changed()||(d.push(h.keypath),d[h.keypath]=h):(l=h.attribute.value,f=h.getValue(),t(l,f)||e(l,f)||(o[i]=f)));if(d.length&&d.forEach(function(e){var n,r,i;n=d[e],r=n.attribute.value,i=n.getValue(),t(r,i)||(o[e]=i)}),s&&(u=r.viewmodel.depsMap["default"][i]))for(c=u.length;c--;)n(r,u[c],o,s)}var r;return r=function(t,e){var r;return"string"!=typeof t&&(t="",e=!0),n(this,t,r={},e),this.set(r)}}(Ni,v),ks=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,m,g,y,b,w,E,x,_,k,A,T,O,C,S,N,R){return{add:t,animate:e,detach:n,find:r,findAll:i,findAllComponents:o,findComponent:s,fire:a,get:u,insert:c,merge:h,observe:l,off:f,on:d,pop:p,push:v,render:m,reset:g,resetTemplate:y,reverse:b,set:w,shift:E,sort:x,splice:_,subtract:k,teardown:A,toggle:T,toHTML:O,unrender:C,unshift:S,update:N,updateModel:R}}(S,Ge,Ze,Ke,sn,an,un,cn,hn,fn,dn,bn,xn,_n,On,Cn,Nn,cs,hs,ls,fs,ds,ps,vs,ms,gs,ys,bs,ws,Es,xs,_s),As=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"==t?e:3&e|8,n.toString(16)})},Ts=function(){var t=0;return function(){return"r-"+t++}}(),Os=function(t,e,n,r){var i=t.root,o=t.keypath;return"sort"===n||"reverse"===n?void i.viewmodel.set(o,e):void(r&&i.viewmodel.splice(o,r))},Cs=function(t,e,n,r,i){var o,s,a,u=[],c=["pop","push","reverse","shift","sort","splice","unshift"];return c.forEach(function(o){var s=function(){var e,s,a,u,c;for(e=n(this,o,Array.prototype.slice.call(arguments)),s=r(this,e),a=Array.prototype[o].apply(this,arguments),this._ractive.setting=!0,c=this._ractive.wrappers.length;c--;)u=this._ractive.wrappers[c],t.start(u.root),i(u,this,o,s),t.end();return this._ractive.setting=!1,a};e(u,o,{value:s})}),o={},o.__proto__?(s=function(t){t.__proto__=u},a=function(t){t.__proto__=Array.prototype}):(s=function(t){var n,r;for(n=c.length;n--;)r=c[n],e(t,r,{value:u[r],configurable:!0})},a=function(t){var e;for(e=c.length;e--;)delete t[c[e]]}),s.unpatch=a,s}(b,T,kn,An,Os),Ss=function(t,e,n){var r,i,o;return r={filter:function(t){return e(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new i(t,e,n)}},i=function(e,r,i){this.root=e,this.value=r,this.keypath=i,r._ractive||(t(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[e._guid]||(r._ractive.instances[e._guid]=0,r._ractive.instances.push(e)),r._ractive.instances[e._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var t,e,r,i,s;if(t=this.value,e=t._ractive,r=e.wrappers,i=e.instances,e.setting)return!1;if(s=r.indexOf(this),-1===s)throw new Error(o);if(r.splice(s,1),r.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(s=i.indexOf(this.root),-1===s)throw new Error(o);i.splice(s,1)}}else delete t._ractive,n.unpatch(this.value)}},o="Something went wrong in a rather interesting way",r}(T,i,Cs),Ns=function(t,e){var n,r;return t&&(n={filter:function(n,r,i){return t.filter(n,r,i)&&e.filter(n)},wrap:function(t,e,n){return new r(t,e,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=t.wrap(n,r,i),this.arrayWrapper=e.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}}),n}(E,Ss),Rs=function(t,e,n,r){function i(t,e){var n,r={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r}function o(t){var e;return a[t]||(e=t?t+".":"",a[t]=function(n,r){var o;return"string"==typeof n?(o={},o[e+n]=r,o):"object"==typeof n?e?i(n,t):n:void 0}),a[t]}var s,a={};return s=function(i,s){var a,u,c,h,l=this.ractive;for(a=l.adapt.length,u=0;a>u;u+=1){if(c=l.adapt[u],"string"==typeof c){var f=t.registries.adaptors.find(l,c);if(!f)throw new Error('Missing adaptor "'+c+'"');c=l.adapt[u]=f}if(c.filter(s,i,l))return h=this.wrapped[i]=c.wrap(l,s,i,o(i)),h.value=s,s}return l.magic?r.filter(s,i,l)?this.wrapped[i]=r.wrap(l,s,i):n.filter(s,i,l)&&(this.wrapped[i]=n.wrap(l,s,i)):l.modifyArrays&&e.filter(s,i,l)&&(this.wrapped[i]=e.wrap(l,s,i)),s}}(ze,Ss,E,Ns),Is=function(t){var e,n,r,i,o=[""];for(e=t.length;e--;)for(n=t[e],r=n.split(".");r.length>1;)r.pop(),i=r.join("."),-1===o.indexOf(i)&&o.push(i);return o},Ls=function(){function t(t){var e,r,i,o,s,a="";if(!n[t]){for(i=[];a.length<t;)a+=1;for(e=parseInt(a,2),o=function(t){return"1"===t},s=0;e>=s;s+=1){for(r=s.toString(2);r.length<t;)r="0"+r;i[s]=Array.prototype.map.call(r,o)}n[t]=i}return n[t]}var e,n={};return e=function(e){var n,r,i,o;return n=e.split("."),r=t(n.length),i=function(t,e){return t?"*":n[e]},o=r.map(function(t){return t.map(i).join(".")})}}(),Ps=function(t){function e(e,i,o){var s;r(e,i),o||(s=t(i),s.forEach(function(t){n(e,t,i)}))}function n(t,e,i){var s,a,u;s=t.depsMap.patternObservers,a=s[e],a&&a.forEach(function(e){var s=o.exec(e)[0];u=i?i+"."+s:s,r(t,u),n(t,e,u)})}function r(t,e){t.patternObservers.forEach(function(t){t.regex.test(e)&&t.update(e)})}var i,o=/[^\.]+$/;return i=e}(Ls),Fs=function(t,e){function n(t){t.update()}function r(t,e,n){var r,i;(r=o(t,e,n))&&(i=t.get(e),r.forEach(function(t){return t.setValue(i)}))}function i(t,e,n){function r(t){t.forEach(i),t.forEach(s)}function i(e){var r=o(t,e,n);r&&u.push({keypath:e,deps:r})}function s(e){var i;(i=t.depsMap[n][e])&&r(i)}function a(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var u=[];r(e),u.forEach(a)}function o(t,e,n){var r=t.deps[n];return r?r[e]:null}function s(t,e){e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}var a,u=["observers","default"];return a=function(){var o,a,c,h,l,f=this,d=this,p=[],v={};if(this.changes.length){h=function(t){var e;(e=d.deps.computed[t])&&s(c,e)},l=function(t){var e;h(t),(e=d.depsMap.computed[t])&&e.forEach(l)};do o=this.changes,s(p,o),this.changes=[],c=[],a=t(o),a.forEach(h),o.forEach(l),c.forEach(n);while(this.changes.length);return a=t(p),this.patternObservers.length&&(a.forEach(function(t){return e(f,t,!0)}),p.forEach(function(t){return e(f,t)})),u.forEach(function(t){f.deps[t]&&(a.forEach(function(e){return r(f,e,t)}),i(f,p,t))}),p.forEach(function(t){v[t]=f.get(t)}),this.implicitChanges={},v}}}(Is,Ps),Ms=function(){this.capturing=!0,this.captured=[]},js=function(t,e){var n,r,i;if(e||(r=this.wrapped[t])&&r.teardown()!==!1&&(this.wrapped[t]=null),(i=this.computations[t])&&i.compute(),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())},Vs={FAILED_LOOKUP:!0},Ds=function(t,e){var n={},r=function(t,r){this.viewmodel=t,this.root=t.ractive,this.ref=r,this.parentFragment=n,t.unresolvedImplicitDependencies[r]=!0,t.unresolvedImplicitDependencies.push(this),e.addUnresolved(this)};return r.prototype={resolve:function(){this.viewmodel.mark(this.ref),this.viewmodel.unresolvedImplicitDependencies[this.ref]=!1,t(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){e.removeUnresolved(this)}},r}(l,b),Us=function(t,e){function n(e,n){var r,i,o,s,a,u,c;return r=n.split("."),i=r.pop(),o=r.join("."),s=e.get(o),(c=e.wrapped[o])&&(s=c.get()),null!==s&&void 0!==s?((a=e.cacheMap[o])?-1===a.indexOf(n)&&a.push(n):e.cacheMap[o]=[n],"object"!=typeof s||i in s?(u=s[i],e.adapt(n,u,!1),e.cache[n]=u,u):e.cache[n]=t):void 0}var r,i={};return r=function(r){var o=arguments[1];void 0===o&&(o=i);var s,a,u,c,h=this.ractive,l=this.cache;return void 0===l[r]?((a=this.computations[r])?s=a.value:(u=this.wrapped[r])?s=u.value:r?s=(c=this.evaluators[r])?c.value:n(this,r):(this.adapt("",h.data),s=h.data),l[r]=s):s=l[r],o.evaluateWrapped&&(u=this.wrapped[r])&&(s=u.get()),o.capture&&this.capturing&&-1===this.captured.indexOf(r)&&(this.captured.push(r),s===t&&this.unresolvedImplicitDependencies[r]!==!0&&new e(this,r)),s===t?void 0:s}}(Vs,Ds),Ws=function(t,e){e&&(this.implicitChanges[t]=!0),-1===this.changes.indexOf(t)&&(this.changes.push(t),this.clearCache(t))},Bs=function(t,e){var n,r,i,o;return n={},r=0,i=t.map(function(t,i){var s,a,u;a=r,u=e.length;do{if(s=e.indexOf(t,a),-1===s)return o=!0,-1;a=s+1}while(n[s]&&u>a);return s===r&&(r+=1),s!==i&&(o=!0),n[s]=!0,s}),i.unchanged=!o,i},$s=function(t,e,n){function r(e){return"function"==typeof e.merge&&(!e.subtype||e.subtype===t.SECTION_EACH)}function i(t){return JSON.stringify(t)}function o(t){if(t===!0)return i;if("string"==typeof t)return a[t]||(a[t]=function(e){return e[t]}),a[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var s,a={};return s=function(t,i,s,a){var u,c,h,l,f,d=this;if(this.mark(t),a&&a.compare){h=o(a.compare);try{u=i.map(h),c=s.map(h)}catch(p){if(this.debug)throw p;e("Merge operation: comparison failed. Falling back to identity checking"),u=i,c=s}}else u=i,c=s;l=n(u,c),l.forEach(function(e,n){-1===e&&d.mark(t+"."+n)}),this.set(t,s,!0),(f=this.deps["default"][t])&&f.filter(r).forEach(function(t){return t.merge(l)}),i.length!==s.length&&this.mark(t+".length",!0)}}(W,F,Bs),zs=function(){function t(t,e,n){var r,i,o,s;for(r=e.split(".");r.length;)r.pop(),i=r.join("."),o=t.depsMap[n]||(t.depsMap[n]={}),s=o[i]||(o[i]=[]),void 0===s[e]&&(s[e]=0,s.push(e)),s[e]+=1,e=i}var e;return e=function(e,n){var r=arguments[2];void 0===r&&(r="default");var i,o,s;n.isStatic||(i=this.deps[r]||(this.deps[r]={}),o=i[e]||(i[e]=[]),o.push(n),e&&((s=this.evaluators[e])&&(s.dependants||s.wake(),s.dependants+=1),t(this,e,r)))}}(),qs=function(){return this.capturing=!1,this.captured},Hs=function(t,e){return function(n,r,i){var o,s,a,u,c,h,l,f;c=this.computations[n],c&&!c.setting&&(c.set(r),r=c.get()),t(this.cache[n],r)||(h=this.wrapped[n],l=this.evaluators[n],h&&h.reset&&(f=h.reset(r)!==!1,f&&(r=h.get())),l&&(l.value=r),c||l||f||(o=n.split("."),s=o.pop(),a=o.join("."),h=this.wrapped[a],h&&h.set?h.set(s,r):(u=h?h.get():this.get(a),u||(u=e(s),this.set(a,u,!0)),u[s]=r)),i?this.clearCache(n):this.mark(n))}}(v,w),Gs=function(t){function e(e){return e.type===t.SECTION&&(!e.subtype||e.subtype===t.SECTION_EACH)&&e.rendered}var n;return n=function(t,n){var r,i,o=this;for(r=n.rangeStart;r<n.rangeEnd;r+=1)o.mark(t+"."+r);n.balance&&o.mark(t+".length",!0),(i=o.deps["default"][t])&&i.filter(e).forEach(function(t){return t.splice(n)})}}(W),Zs=function(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()},Ks=function(){function t(t,e,n){var r,i,o,s;for(r=e.split(".");r.length;)r.pop(),i=r.join("."),o=t.depsMap[n],s=o[i],s[e]-=1,s[e]||(s.splice(s.indexOf(e),1),s[e]=void 0),e=i}var e;return e=function(e,n){var r=arguments[2];void 0===r&&(r="default");var i,o,s;if(!n.isStatic){if(i=this.deps[r][e],o=i.indexOf(n),-1===o)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(o,1),e&&((s=this.evaluators[e])&&(s.dependants-=1,s.dependants||s.sleep()),t(this,e,r))}}}(),Qs=function(){function t(t){var e="var __ractive=this;return("+t.replace(n,function(t,e){return'__ractive.get("'+e+'")'})+")";return new Function(e)}var e,n=/\$\{([^\}]+)\}/g;return e=function(e){return"function"==typeof e?{get:e}:"string"==typeof e?{get:t(e)}:("object"==typeof e&&"string"==typeof e.get&&(e={get:t(e.get),set:e.set}),e)}}(),Ys=function(t,e,n){var r=function(t,e,n){var r;this.ractive=t,this.viewmodel=t.viewmodel,this.key=e,this.getter=n.get,this.setter=n.set,this.dependencies=[],(r=t.viewmodel.get(e))&&this.set(r),this.update()};return r.prototype={get:function(){return this.compute(),this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,t)},compute:function(){var e,r,i;e=this.ractive,e.viewmodel.capture();try{this.value=this.getter.call(e)}catch(o){t.warn({debug:e.debug,message:"failedComputation",args:{key:this.key,err:o.message||o}}),r=!0}return i=e.viewmodel.release(),n(this,this.dependencies,i),r?!1:!0},update:function(){var t=this.value;this.compute()&&!e(this.value,t)&&this.ractive.viewmodel.mark(this.key)}},r}(Qn,v,Jn),Js=function(t,e){return function(n,r){var i,o;for(i in r)o=t(r[i]),n.viewmodel.computations[i]=new e(n,i,o)}}(Qs,Ys),Xs=function(){function t(t){return"string"==typeof t&&(t=[t]),t}var e={lookup:function(t,e){var n,r=t.adapt;if(!r||!r.length)return r;if(e&&Object.keys(e).length&&(n=r.length))for(;n--;){var i=r[n];"string"==typeof i&&(r[n]=e[i]||i)}return r},combine:function(e,n){return e=t(e),n=t(n),e&&e.length?n&&n.length?(e.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),n):e.slice():n}};return e}(),ta=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v){var m;try{Object.defineProperty({},"test",{value:0})}catch(g){m=!0}var y=function(e){this.ractive=e,y.extend(e.constructor,e),this.cache={},this.cacheMap=t(null),this.deps={computed:{},"default":{}},this.depsMap={computed:{},"default":{}},this.patternObservers=[],this.wrapped=t(null),this.evaluators=t(null),this.computations=t(null),this.captured=null,this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={}};return y.extend=function(t,e){if(e.magic&&m)throw new Error("Getters and setters (magic mode) are not supported in this browser");e.adapt=v.combine(t.prototype.adapt,e.adapt)||[],e.adapt=v.lookup(e,e.adaptors)},y.prototype={adapt:e,applyChanges:n,capture:r,clearCache:i,get:o,mark:s,merge:a,register:u,release:c,set:h,splice:l,teardown:f,unregister:d,compute:function(){p(this.ractive,this.ractive.computed)}},y}(B,Rs,Fs,Ms,js,Us,Ws,$s,zs,qs,Hs,Gs,Zs,Ks,Js,Xs),ea=function(t,e,n,r,i,o){function s(t){var e;if(e=n(t.el)){if(e&&!t.append){if(e.__ractive_instances__)try{e.__ractive_instances__.splice(0,e.__ractive_instances__.length).forEach(function(t){return t.teardown()})}catch(r){}e.innerHTML=""}t.render(e,t.append)}}function a(t,n){t._guid=r(),t._subs=e(null),t._config={},t._twowayBindings=e(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],n._parent&&n._component&&(t._parent=n._parent,t.component=n._component,n._component.instance=t)}var u;return u=function(e){var n=arguments[1];void 0===n&&(n={}),a(e,n),t.init(e.constructor,e,n),e.viewmodel=new i(e),e.viewmodel.compute(),e.template&&(e.fragment=new o({template:e.template,root:e,owner:e})),s(e)}}(ze,B,ln,Ts,ta,us),na=function(t){return function(e,n,r){e.beforeInit&&e.beforeInit(r),t(e,r)}}(ea),ra=function(t,e,n,r){function i(e,n,r){for(var i in r)if(!(i in c)&&r.hasOwnProperty(i)){var o=r[i];"function"==typeof o&&(o=t(e,i,o)),n[i]=o}}function o(t){if(!(t.prototype instanceof u))return t;for(var n={};t;)l.forEach(function(e){s(e.useDefaults?t.prototype:t,n,e.name)}),Object.keys(t.prototype).forEach(function(r){if("computed"!==r){var i=t.prototype[r];if(r in n){if("function"==typeof n[r]&&"function"==typeof i&&n[r]._method){var o,s=i._method;s&&(i=i._method),o=e(n[r]._method,i),s&&(o._method=o),n[r]=o}}else n[r]=i._method?i._method:i}}),t=t._parent!==u?t._parent:!1;return n}function s(t,e,n){var r,i=Object.keys(t[n]);i.length&&((r=e[n])||(r=e[n]={}),i.filter(function(t){return!(t in r)}).forEach(function(e){return r[e]=t[n][e]}))}var a,u,c={_parent:!0,_component:!0},h={toPrototype:i,toOptions:o},l=n.registries;return n.keys.forEach(function(t){return c[t]=!0}),r.push(function(){u=r.Ractive}),a=h}(Be,V,ze,n),ia=function(t,e,n,r,i,o,s){return function a(){var u=arguments[0];void 0===u&&(u={});var c,h,l,f=this;return u=s.toOptions(u),c=function(t){i(this,c,t)},h=t(f.prototype),h.constructor=c,l={_guid:{value:n()},defaults:{value:h},extend:{value:a,writable:!0,configurable:!0},_parent:{value:f}},e(c,l),r.extend(f,h,u),o.extend(f,h),s.toPrototype(f.prototype,h,u),c.prototype=h,c}}(B,O,As,ze,na,ta,ra),oa=function(t,e,n,r,i,o,s,a,u,c,h,l,f){var d,p;for(d=function(t){l(this,t)},p={extend:{value:c},parse:{value:h},Promise:{value:a},svg:{value:r},magic:{value:i},VERSION:{value:"0.5.8"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:e},events:{writable:!0,value:{}},interpolators:{writable:!0,value:n},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},o(d,p),d.prototype=u(s,t),d.prototype.constructor=d,d.defaults=d.prototype,f.Ractive=d;f.length;)f.pop()();var v="function";if(typeof Date.now!==v||typeof String.prototype.trim!==v||typeof Object.keys!==v||typeof Array.prototype.indexOf!==v||typeof Array.prototype.forEach!==v||typeof Array.prototype.map!==v||typeof Array.prototype.filter!==v||"undefined"!=typeof window&&typeof window.addEventListener!==v)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return d}(t,e,a,u,x,O,ks,f,wi,ia,Pe,ea,n);return oa}();